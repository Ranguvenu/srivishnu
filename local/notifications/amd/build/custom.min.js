define(["local_notifications/jquery.dataTables","jquery","core/str","core/modal_factory","core/modal_events"],function(t,n,o,e){return{init:function(){n(document).on("change","#id_notificationid",function(){var t=n(this).find("option:selected").val(),o=n("#id_costcenterid").find("option:selected").val();null!==t&&n.ajax({method:"GET",dataType:"json",url:M.cfg.wwwroot+"/local/notifications/custom_ajax.php?notificationid="+t+"&page=1&costcenterid="+o,success:function(t){n(".form-control-static").html(t.datastrings);n.each(t.datamoduleids,function(t,n){"<option value = "+n.id+" >"+n.name+"</option>"})}})})},notificationDatatable:function(t){params=[],params.action="display",params.id=t.id,params.context=t.context;var o=n("#notification_info").DataTable({columnDefs:[{targets:[1,3],searchable:!1}],bInfo:!1,bLengthChange:!1,order:[],language:{emptyTable:"No Notifications available in table",paginate:{next:">",previous:"<"}},pageLength:10});n(".dataTables_filter input").unbind().bind("keyup",function(){var t="\\b"+this.value.toLowerCase()+"\\b";o.rows().search(t,!0,!1).draw()})},deletenotification:function(t){return o.get_strings([{key:"deletenotification",component:"local_notifications"},{key:"deleteconfirm_msg",component:"local_notifications"}]).then(function(n){e.create({title:n[0],type:e.types.DEFAULT,body:n[1],footer:'<button type="button" class="btn btn-primary" data-action="save">Yes</button>&nbsp;<button type="button" class="btn btn-secondary" data-action="cancel">No</button>'}).done(function(n){this.modal=n,n.getRoot().find('[data-action="save"]').on("click",function(){window.location.href="index.php?delete="+t+"&confirm=1&sesskey="+M.cfg.sesskey}.bind(this)),n.getFooter().find('[data-action="cancel"]').on("click",function(){n.setBody(""),n.hide()}),n.show()}.bind(this))}.bind(this))}}});