{"version":3,"sources":["../src/custom.js"],"names":["define","dataTable","$","Str","ModalFactory","init","document","on","notificationid","find","val","costcenterid","ajax","method","dataType","url","M","cfg","wwwroot","success","data","html","datastrings","each","datamoduleids","index","value","id","name","notificationDatatable","args","params","action","context","deletenotification","elem","get_strings","key","component","then","s","create","title","type","types","DEFAULT","body","footer","done","modal","getRoot","window","location","href","sesskey","bind","getFooter","setBody","hide","show"],"mappings":"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","sourcesContent":["define(['local_notifications/jquery.dataTables', 'jquery', 'core/str', 'core/modal_factory', 'core/modal_events'],\n        function(dataTable, $, Str, ModalFactory) {\n    return {\n        init: function() {\n            $(document).on('change', '#id_notificationid', function() {\n                // console.log('init');\n                var notificationid = $(this).find(\"option:selected\").val();\n                 var costcenterid = $('#id_costcenterid').find(\"option:selected\").val();\n                // console.log(notificationid);\n                if (notificationid !== null) {\n                      $.ajax({\n                        method: \"GET\",\n                        dataType: \"json\",\n                        url: M.cfg.wwwroot + \"/local/notifications/custom_ajax.php?notificationid=\"+notificationid+\"&page=\"+1+\"&costcenterid=\"+costcenterid,\n                        success: function(data){\n                            // console.log(data);\n                            //$(\".form-control-static\").append(JSON.stringify(data));\n                            $(\".form-control-static\").html(data.datastrings);\n                            var template ='';\n                            $.each( data.datamoduleids, function( index, value) {\n                                template += '<option value = ' + value.id + ' >' +value.name + '</option>';\n                           });\n                            \n                            // if(template){\n                            //     $(\".module_label\").css('display','block');\n                            //     $(\"div .module_label .tag-info\").html(\"\");\n                            //     // $(\"#id_moduleid\").html(template);\n                            //     // $(\".module_label label\").html(data.datamodule_label);\n                            // }else{\n                            //     $(\".module_label\").css('display','none');\n                            // }\n                            \n                        }\n                    });\n                }\n            });\n            \n        },\n        notificationDatatable: function(args) {\n            params = [];\n            params.action = 'display';\n            params.id = args.id;\n            params.context = args.context;\n            var oTable = $('#notification_info').dataTable({\n                \"bInfo\" : false,\n                \"bLengthChange\": false,\n                \"order\": [],\n                \"language\": {\n                    \"emptyTable\": \"No Notifications available in table\",\n                    \"paginate\": {\n                        \"next\": \">\",\n                        \"previous\": \"<\"\n                    }\n                },\n                \"pageLength\": 10\n            });\n        },\n        deletenotification: function(elem) {\n            return Str.get_strings([{\n                key: 'deletenotification',\n                component: 'local_notifications'\n            }, {\n                key: 'deleteconfirm_msg',\n                component: 'local_notifications'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Yes</button>&nbsp;' +\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">No</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href ='index.php?delete='+elem+'&confirm=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        }\n        \n    };\n});"],"file":"custom.min.js"}