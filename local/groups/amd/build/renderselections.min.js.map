{"version":3,"sources":["../src/renderselections.js"],"names":["define","$","Str","ModalFactory","init","document","on","costcentervalue","find","val","ajax","method","dataType","url","M","cfg","wwwroot","success","data","template","each","index","value","id","fullname","html","displayusers","cache","result","create","title","type","types","DEFAULT","body","done","modal","show","setLarge","getRoot","addClass","animate","setBody","setTimeout","destroy","error","deletecohort","elem","name","get_strings","key","component","param","then","s","footer","window","location","href","sesskey","bind","getFooter","hide"],"mappings":"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","sourcesContent":["define(['jquery', 'core/str', 'core/modal_factory', 'core/modal_events'],\n        function($, Str, ModalFactory) {\n    return {\n        init: function() {\n            $(document).on('change', '#id_costcenterid', function() {\n                var costcentervalue = $(this).find(\"option:selected\").val();\n                if (costcentervalue !== null) {\n                    $.ajax({\n                        method: \"GET\",\n                        dataType: \"json\",\n                        url: M.cfg.wwwroot + \"/local/groups/ajax.php?action=departmentlist&costcenter=\"+costcentervalue,\n                        success: function(data){\n                            var template = '<option>Select Departments</option>';\n                              $.each( data.data, function( index, value) {\n                                   template +=\t'<option value = ' + value.id + ' >' +value.fullname + '</option>';\n                              });\n                            $(\"#id_departmentid\").html(template);\n                        }\n                    });\n                }\n            });\n        },\n        displayusers: function(id) {\n            $.ajax({\n                url:M.cfg.wwwroot+\"/local/groups/custom_ajax.php?page=1&id=\"+id,\n                cache: false,\n                success:function(result){\n                        ModalFactory.create({\n                        title: 'Enrolled users',\n                        type: ModalFactory.types.DEFAULT,\n                        body: result\n                    }).done(function(modal) {\n                            this.modal = modal;\n                            modal.show();\n                            modal.setLarge();\n                            modal.getRoot().addClass('openLMStransition');\n                            modal.getRoot().animate({\"right\":\"0%\"}, 500);\n                            modal.getRoot().find('[data-action=\"hide\"]').on('click', function() {\n                                modal.setBody('');\n                            modal.getRoot().animate({\"right\":\"-85%\"}, 500);\n                                setTimeout(function(){\n                                modal.destroy();\n                            }, 1000);\n                            });\n                    });                    \n                },\n                error: function(){\n                    $('#onlinetestview'+id).html('error');\n                },                \n                dataType: \"html\"\n            });\n            \n        },\n        deletecohort: function(elem, name) {\n            return Str.get_strings([{\n                key: 'delcohort',\n                component: 'local_groups'\n            }, {\n                key: 'delconfirm',\n                component: 'local_groups',\n                param:name\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Yes</button>&nbsp;' +\n        '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">No</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                    modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href =M.cfg.wwwroot +'/local/groups/edit.php?id='+elem+'&confirm=1&delete=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        }\n    };\n});"],"file":"renderselections.min.js"}