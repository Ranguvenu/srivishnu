define(["jquery","core/str","core/modal_factory","core/modal_events"],function(t,o,e){return{init:function(){t(document).on("change","#id_costcenterid",function(){var o=t(this).find("option:selected").val();null!==o&&t.ajax({method:"GET",dataType:"json",url:M.cfg.wwwroot+"/local/users/ajax.php?action=departmentlist&costcenter="+o,success:function(o){var e="<option value= >--Select College--</option>";t.each(o.colleges,function(t,o){e+="<option value = "+o.id+" >"+o.fullname+"</option>"}),t("#id_open_collegeid").html(e);var n="<option value=0>--Select Department--</option>";t.each(o.departments,function(t,o){n+="<option value = "+o.id+" >"+o.fullname+"</option>"}),t("#id_departmentid").html(n);t("#id_curriculumid").html("<option value = 0>Select Curriculum</option>")}})})},displayusers:function(o){t.ajax({url:M.cfg.wwwroot+"/local/groups/custom_ajax.php?page=1&id="+o,cache:!1,success:function(t){e.create({title:"Enrolled users",type:e.types.DEFAULT,body:t}).done(function(t){this.modal=t,t.show(),t.setLarge(),t.getRoot().addClass("openLMStransition"),t.getRoot().animate({right:"0%"},500),t.getRoot().find('[data-action="hide"]').on("click",function(){t.setBody(""),t.getRoot().animate({right:"-85%"},500),setTimeout(function(){t.destroy()},1e3)})})},error:function(){t("#onlinetestview"+o).html("error")},dataType:"html"})},deletecohort:function(t,n){return o.get_strings([{key:"delcohort",component:"local_groups"},{key:"delconfirm",component:"local_groups",param:n}]).then(function(o){e.create({title:o[0],type:e.types.DEFAULT,body:o[1],footer:'<button type="button" class="btn btn-primary" data-action="save">Yes</button>&nbsp;<button type="button" class="btn btn-secondary" data-action="cancel">No</button>'}).done(function(o){this.modal=o,o.getRoot().find('[data-action="save"]').on("click",function(){window.location.href=M.cfg.wwwroot+"/local/groups/edit.php?id="+t+"&confirm=1&delete=1&sesskey="+M.cfg.sesskey}.bind(this)),o.getFooter().find('[data-action="cancel"]').on("click",function(){o.setBody(""),o.hide()}),o.show()}.bind(this))}.bind(this))}}});