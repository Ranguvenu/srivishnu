{"version":3,"sources":["../src/costcenterdatatables.js"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","users","init","costcenterDatatable","M","cfg","wwwroot","costcenterDelete","args","get_strings","key","component","param","then","s","create","title","type","types","SAVE_CANCEL","body","actionstatusmsg","done","modal","setSaveButtonText","getRoot","on","save","e","preventDefault","confirm","params","id","promise","call","methodname","action","parentid","window","location","href","fail","ex","console","log","bind","show"],"mappings":"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","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     core_group/AjaxForms\r\n * @class      AjaxForms\r\n * @package    core_group\r\n * @copyright  2017 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine([\r\n    'local_costcenter/jquery.dataTables',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/ajax',\r\n    'jquery',\r\n    'jqueryui'\r\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\r\n    var users;\r\n    return users = {\r\n        init: function(args) {\r\n            \r\n        },\r\n        costcenterDatatable: function(args) {\r\n            $('#department-index').dataTable({\r\n                \"searching\": true,\r\n                \"responsive\": true,\r\n                \"processing\": true,\r\n                \"lengthMenu\": [[10, 25,50,100, -1], [10,25, 50,100, \"All\"]],\r\n                \"language\": {\r\n                    \"emptyTable\": \"No Universities available in table\",\r\n                    \"paginate\": {\r\n                        \"previous\": \"<\",\r\n                        \"next\": \">\"\r\n                    },\r\n                    \"sProcessing\": \"<img src= \"+ M.cfg.wwwroot + \"/local/ajax-loader.svg />\"\r\n                },\r\n                 \"aaSorting\": [],\r\n                \r\n                 \"pageLength\": 10,      \r\n            });\r\n        },\r\n    //     costcenterDelete: function(args) {\r\n    //         //console.log(args);\r\n    //         return Str.get_strings([{\r\n    //             key: 'confirm'\r\n    //         },\r\n    //         {\r\n    //             key: 'confirm',\r\n    //             component: 'local_costcenter',\r\n    //             param :args\r\n    //         },\r\n    //         {\r\n    //             key: 'suspendallconfirm',\r\n    //             component: 'local_costcenter'\r\n    //         },\r\n    //         {\r\n    //             key: 'delete'\r\n    //         }]).then(function(s) {\r\n    //             ModalFactory.create({\r\n    //                 title: Str.get_string('deleteconfirmation', 'local_costcenter'),\r\n    //                 type: ModalFactory.types.CONFIRM,\r\n    //                 body: args.actionstatusmsg\r\n    //             }).done(function(modal) {\r\n    //                 this.modal = modal;\r\n    //                 modal.setSaveButtonText(s[3]);\r\n    //                 modal.getRoot().on(ModalEvents.yes, function(e) {\r\n    //                     e.preventDefault();\r\n    //                     args.confirm = true;\r\n    //                     console.log(args);\r\n    //                     var params = {};\r\n    //                     params.id = args.id;\r\n    //                     // params.contextid = args.contextid;\r\n                    \r\n    //                     var promise = Ajax.call([{\r\n    //                         methodname: 'local_costcenter_delete_costcenter',\r\n    //                         args: params\r\n    //                     }]);\r\n    //                     promise[0].done(function(resp) {\r\n    //                         if(args.action == 'deletecostcenter' && args.parentid == 0){\r\n    //                             window.location.href = M.cfg.wwwroot + '/local/costcenter/index.php';\r\n    //                         }else{\r\n    //                             window.location.href = window.location.href;\r\n    //                         }\r\n    //                     }).fail(function(ex) {\r\n    //                         // do something with the exception\r\n    //                          console.log(ex);\r\n    //                     });\r\n    //                 }.bind(this));\r\n    //                 modal.show();\r\n    //             }.bind(this));\r\n    //         }.bind(this));\r\n    //     },\r\n    // };\r\n\r\n//added revathi\r\n    \r\n    costcenterDelete: function(args) {\r\n            return Str.get_strings([{\r\n                key: 'confirm'\r\n            },\r\n            {\r\n                key: 'suspendconfirm',\r\n                component: 'local_costcenter',\r\n                param :args\r\n            },\r\n            {\r\n                key: 'suspendallconfirm',\r\n                component: 'local_costcenter'\r\n            },\r\n            {\r\n                key: 'confirm'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    body: args.actionstatusmsg\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    modal.setSaveButtonText(s[3]);\r\n                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                        e.preventDefault();\r\n                        args.confirm = true;\r\n                        var params = {};\r\n                        params.id = args.id;\r\n                        // params.contextid = args.contextid;\r\n                    \r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_costcenter_delete_costcenter',\r\n                            args: params\r\n                        }]);\r\n                        promise[0].done(function(resp) {\r\n                            if(args.action == 'deletecostcenter' && args.parentid == 0){\r\n                                window.location.href = M.cfg.wwwroot + '/local/costcenter/index.php';\r\n                            }else{\r\n                                window.location.href = window.location.href;\r\n                            }\r\n                             }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n    };\r\n    // end added\r\n});\r\n\r\n\r\n"],"file":"costcenterdatatables.min.js"}