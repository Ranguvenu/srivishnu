define ("local_costcenter/cardPaginate",["jquery","core/ajax","core/str","core/notification","core/templates","local_costcenter/paged_content_factory"],function(a,b,c,d,e,f){var g=6,h="",i="",j={LOADING_ICON_CONTAINER:"[data-region=\"overlay-icon-container\"]",PAGINATE_COUNT_CONTAINER:"[data-region=\""+h+"-count-container\"]",PAGINATE_LIST_CONTAINER:"[data-region=\""+h+"-list-container\"]"},k=function(b){b.methodName;b.templateName;if(b.hasOwnProperty("targetID")){h=b.targetID;i=a("#"+h)}if(b.hasOwnProperty("perPage")&&"number"==typeof b.perPage){g=b.perPage}j={LOADING_ICON_CONTAINER:"[data-region=\"overlay-icon-container\"]",PAGINATE_COUNT_CONTAINER:"[data-region=\""+h+"-count-container\"]",PAGINATE_LIST_CONTAINER:"[data-region=\""+h+"-list-container\"]"}},l=function(a){a.find(j.LOADING_ICON_CONTAINER).removeClass("hidden")},m=function(a){a.find(j.LOADING_ICON_CONTAINER).addClass("hidden")},n=function(a,c,d){var e={methodname:a.methodName,args:{contextid:c.contextid,options:JSON.stringify(a),dataoptions:JSON.stringify(c),offset:a.offset,limit:a.perPage,filterdata:JSON.stringify(d)}};return b.call([e])[0]},o=function(a,b,c,h,i){return f.createFromAjax(c,g,function(c){return c.map(function(c){var f=c.offset,g=c.limit;a.offset=f;a.limit=g;if(0<f){return n(a,b,i).then(function(b){b.records;b.cardClass=a.cardClass;b.viewtypeCard=!1;if("card"==a.viewType||"table"==a.viewType){b.viewtypeCard=!0}return e.render(a.templateName,{response:b})}).fail(d.exception)}else{h.cardClass=a.cardClass;h.viewtypeCard=!1;if("card"==a.viewType||"table"==a.viewType){h.viewtypeCard=!0}return e.render(a.templateName,{response:h})}})},{controlPlacementBottom:!0,eventNamespace:"paginate-paged-content-"+a.targetID,persistentLimitKey:"paginate-paged-content-limit-key"})},p=function(b,c,f){k(b);l(i);b.offset=0;return n(b,c,f).then(function(a){var d=a.totalcount,g=a.records;if(g.length){return o(b,c,d,a,f)}else{if(a.nodata){return e.render(b.templateName,{response:a})}else{if("courses"==c.moduletype){return e.render("local_costcenter/no-data",{response:"Courses"})}else if("program"==c.moduletype){return e.render("local_costcenter/no-data",{response:"Programs"})}else{return e.render("local_costcenter/no-data",{response:a})}}}}).then(function(c,d){i=a("#"+b.targetID);var f="[data-region=\""+b.targetID+"-list-container\"]",g=i.find(f);e.replaceNodeContents(g,c,d)}).always(function(){i=a("#"+b.targetID);m(i)}).fail(d.exception)};return{reload:p,showLoadingIcon:l,hideLoadingIcon:m,filteringData:function filteringData(b,c){b.preventDefault();var d=a("form#"+c+"").serializeArray();values=[];filterdatavalue=[];a.each(d,function(a,b){valuedata=[];if("_qf__filters_form"!=b.name&&"sesskey"!=b.name){if("options"==b.name||"dataoptions"==b.name){values[b.name]=b.value}else{var c=b.name;if(-1!=c.indexOf("[]")){b.name=c.substring(0,c.length-2)}if(b.name in filterdatavalue){filterdatavalue[b.name]=filterdatavalue[b.name]+","+b.value}else{filterdatavalue[b.name]=b.value}}}});var e=a("#global_filter").val();if(e){filterdatavalue[a("#global_filter").attr("name")]=e}optionsparsondata=JSON.parse(values.options);dataoptionsparsondata=JSON.parse(values.dataoptions);filterdataparsondata=a.extend({},filterdatavalue);a("#global_filter").attr("data-filterdata",JSON.stringify(filterdataparsondata));return p(optionsparsondata,dataoptionsparsondata,filterdataparsondata)},resetingData:function resetingData(b,c){var d=a("form#"+c+"").serializeArray();values=[];filterdatavalue=[];a.each(d,function(a,b){valuedata=[];if("_qf__filters_form"!=b.name&&"sesskey"!=b.name){if("options"==b.name||"dataoptions"==b.name){values[b.name]=b.value}}});var e=a("#global_filter").val();if(e){filterdatavalue[a("#global_filter").attr("name")]=e}optionsparsondata=JSON.parse(values.options);dataoptionsparsondata=JSON.parse(values.dataoptions);filterdataparsondata=a.extend({},filterdatavalue);a("#global_filter").attr("data-filterdata","[]");p(optionsparsondata,dataoptionsparsondata,filterdataparsondata);a("form#"+c+"")[0].reset();a(".tag-info").html("");a("div.form-autocomplete-selection span.mb-3").html("No selection");a("div.form-autocomplete-selection span.mb-3").removeClass("tag-info");a("div.form-autocomplete-selection span.mb-3").removeClass("tag")}}});
//# sourceMappingURL=cardPaginate.min.js.map
