{"version":3,"sources":["../src/cardPaginate.js"],"names":["define","$","Ajax","Str","Notification","Templates","PagedContentFactory","ITEMS_PER_PAGE","targetID","targetRoot","SELECTORS","LOADING_ICON_CONTAINER","PAGINATE_COUNT_CONTAINER","PAGINATE_LIST_CONTAINER","setOptions","options","methodName","templateName","hasOwnProperty","perPage","showLoadingIcon","find","removeClass","hideLoadingIcon","addClass","requestMethod","dataoptions","filterdata","request","methodname","args","contextid","JSON","stringify","offset","limit","call","renderAsPagedContent","totalCount","firstresponse","createFromAjax","pagesData","map","pageData","then","response","records","cardClass","viewType","render","fail","exception","controlPlacementBottom","eventNamespace","persistentLimitKey","reload","totalcount","length","nodata","moduletype","html","js","paginatelistcontainer","container","replaceNodeContents","always","filteringData","e","submitid","preventDefault","formdata","serializeArray","values","filterdatavalue","each","i","field","valuedata","name","value","str","indexOf","substring","filtervalue","val","attr","optionsparsondata","parse","dataoptionsparsondata","filterdataparsondata","extend","resetingData","reset"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * JavaScript for the cardPaginate_preview of the\r\n * add_random_form class.\r\n *\r\n * @module    local_costcenter/cardPaginate\r\n * @package   local_costcenter\r\n * @copyright 2018 eabyas info solutions <http://eabyas.in>\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'core/ajax',\r\n        'core/str',\r\n        'core/notification',\r\n        'core/templates',\r\n        'local_costcenter/paged_content_factory'\r\n    ],\r\n    function(\r\n        $,\r\n        Ajax,\r\n        Str,\r\n        Notification,\r\n        Templates,\r\n        PagedContentFactory\r\n    ) {\r\n\r\n    var ITEMS_PER_PAGE = 6;\r\n    var methodName = '';\r\n    var TEMPLATE_NAME = '';\r\n    var targetID = '';\r\n    var targetRoot = '';\r\n    var Target = '';\r\n    var offset = 0;\r\n    var viewType = 'card';//table/card\r\n\r\n    var SELECTORS = {\r\n        LOADING_ICON_CONTAINER: '[data-region=\"overlay-icon-container\"]',\r\n        PAGINATE_COUNT_CONTAINER: '[data-region=\"'+targetID+'-count-container\"]',\r\n        PAGINATE_LIST_CONTAINER: '[data-region=\"'+targetID+'-list-container\"]'\r\n    };\r\n\r\n    var setOptions = function(options){\r\n        \r\n        methodName = options.methodName;\r\n        TEMPLATE_NAME = options.templateName;\r\n        if(options.hasOwnProperty('targetID')){\r\n            targetID = options.targetID;\r\n            targetRoot = $('#'+targetID);\r\n        }\r\n        if(options.hasOwnProperty('perPage') && typeof(options.perPage) == 'number'){\r\n            ITEMS_PER_PAGE = options.perPage;\r\n        }\r\n        SELECTORS = {\r\n            LOADING_ICON_CONTAINER: '[data-region=\"overlay-icon-container\"]',\r\n            PAGINATE_COUNT_CONTAINER: '[data-region=\"'+targetID+'-count-container\"]',\r\n            PAGINATE_LIST_CONTAINER: '[data-region=\"'+targetID+'-list-container\"]'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Show the loading spinner over the preview section.\r\n     *\r\n     * @param  {jquery} targetID The targetID element.\r\n     */\r\n    var showLoadingIcon = function(targetRoot) {\r\n        targetRoot.find(SELECTORS.LOADING_ICON_CONTAINER).removeClass('hidden');\r\n    };\r\n\r\n    /**\r\n     * Hide the loading spinner.\r\n     *\r\n     * @param  {jquery} targetID The targetID element.\r\n     */\r\n    var hideLoadingIcon = function(targetRoot) {\r\n        targetRoot.find(SELECTORS.LOADING_ICON_CONTAINER).addClass('hidden');\r\n    };\r\n\r\n    /**\r\n     * Render the section of text to show the record count.\r\n     *\r\n     * @param  {jquery} targetID The targetID element.\r\n     * @param  {int} recordCount The number of records.\r\n     */\r\n    // var renderrecordCount = function(targetRoot, totalCount) {\r\n    //     Str.get_string('Paginate_totalCount', 'local_costcenter', totalCount)\r\n    //         .then(function(string) {\r\n    //             targetRoot.find(SELECTORS.PAGINATE_COUNT_CONTAINER).html(string);\r\n    //             return;\r\n    //         })\r\n    //         .fail(Notification.exception);\r\n    // };\r\n\r\n    /**\r\n     * Send a request to the server for more records.\r\n     *\r\n     * @param  {int} userId All records user id.\r\n     * @param  {int} contextId The context where the records will be added.\r\n     * @param  {int} limit How many records to retrieve.\r\n     * @param  {int} offset How many records to skip from the start of the result set.\r\n     * @return {promise} Resolved when the preview section has rendered.\r\n     */\r\n    var requestMethod = function(options, dataoptions, filterdata) {\r\n        var request = {\r\n            methodname: options.methodName,\r\n            args: {\r\n                contextid: dataoptions.contextid,\r\n                options: JSON.stringify(options),\r\n                dataoptions: JSON.stringify(dataoptions),\r\n                offset: options.offset,\r\n                limit: options.perPage,\r\n                filterdata: JSON.stringify(filterdata)\r\n            }\r\n        };\r\n        return Ajax.call([request])[0];\r\n    };\r\n\r\n    /**\r\n     * Build a paged content widget for records with the given criteria. The\r\n     * criteria is used to fetch more records from the server as the user\r\n     * requests new pages.\r\n     *\r\n     * @param  {object[]} options All records user id.\r\n     * @param  {object[]} dataoptions The context where the records will be added.\r\n     * @param  {int} totalCount How many records match the criteria above.\r\n     * @param  {object[]} firstrecords cardPaginates List of records for the first page.\r\n     * @return {promise} A promise resolved with the HTML and JS for the paged content.\r\n     */\r\n    var renderAsPagedContent = function(options, dataoptions, totalCount, firstresponse,filterdata){\r\n        // to control how the records on each page are rendered.\r\n        return PagedContentFactory.createFromAjax(totalCount, ITEMS_PER_PAGE,\r\n            // Callback function to render the requested pages.\r\n            function(pagesData) {\r\n                return pagesData.map(function(pageData) {\r\n                    var offset = pageData.offset;\r\n                    var limit = pageData.limit;\r\n                        options.offset = offset;\r\n                        options.limit = limit;\r\n                        \r\n                        if(offset > 0){\r\n                            return requestMethod(options, dataoptions, filterdata)\r\n                            .then(function(response) {\r\n                                var records = response.records;\r\n                                response[\"cardClass\"] = options.cardClass;\r\n                                \r\n                                response[\"viewtypeCard\"] = false;\r\n                                if(options.viewType == \"card\" || options.viewType == \"table\"){\r\n                                    response[\"viewtypeCard\"] = true;\r\n                                }\r\n                                return Templates.render(options.templateName, {response: response});\r\n                            })\r\n                            .fail(Notification.exception);\r\n                        } else {\r\n                                firstresponse[\"cardClass\"] = options.cardClass;\r\n                                \r\n                                firstresponse[\"viewtypeCard\"] = false;\r\n                                if(options.viewType == \"card\" || options.viewType == \"table\"){\r\n                                    firstresponse[\"viewtypeCard\"] = true;\r\n                                }\r\n                            return Templates.render(options.templateName, {response: firstresponse});\r\n                        }\r\n                    // }\r\n                });\r\n            },\r\n        // Config to set up the paged content.\r\n        {\r\n            controlPlacementBottom: true,\r\n            eventNamespace: 'paginate-paged-content-'+options.targetID,\r\n            persistentLimitKey: 'paginate-paged-content-limit-key'\r\n        }\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Re-render the preview section based on the provided filter criteria.\r\n     *\r\n     * @param  {jquery} targetID The targetID element.\r\n     * @param  {int} userId All records user id.\r\n     * @param  {int} contextId The context where the records will be added.\r\n     * @return {promise} Resolved when the preview section has rendered.\r\n     */\r\n    var reload = function(options, dataoptions,filterdata) {\r\n        //alert(\"hi\");\r\n        setOptions(options);\r\n\r\n        // Show the loading spinner to tell the user that something is happening.\r\n        showLoadingIcon(targetRoot);\r\n\r\n        // Load the first set of records.\r\n        options.offset = 0;\r\n        return requestMethod(options, dataoptions,filterdata)\r\n            .then(function(response) {\r\n\r\n                var totalCount = response.totalcount;\r\n                var records = response.records;\r\n                if (records.length) {\r\n                    // We received some records so render them as paged content\r\n                    // with a paging bar.\r\n                    return renderAsPagedContent(options, dataoptions, totalCount, response, filterdata);\r\n                } else {\r\n                    // If we didn't receive any records then we can return empty\r\n                    // HTML and JS to clear the preview section.\r\n                    // console.log(response.extraparams.nodata);\r\n                    if(response.nodata){\r\n                        return Templates.render(options.templateName, {response: response});\r\n                    }else{\r\n                        if(dataoptions.moduletype == 'courses'){\r\n                            return Templates.render('local_costcenter/no-data', {response: 'Courses'});\r\n                        }else if(dataoptions.moduletype == 'program'){\r\n                            return Templates.render('local_costcenter/no-data', {response: 'Programs'});\r\n                        }else{\r\n                            return Templates.render('local_costcenter/no-data', {response: response});\r\n                        }\r\n                    }\r\n                    //return $.Deferred().resolve('', '');\r\n                }\r\n            })\r\n            .then(function(html, js) {\r\n                // Show the user the records set.\r\n                targetRoot = $('#'+options.targetID);\r\n                var paginatelistcontainer = '[data-region=\"'+options.targetID+'-list-container\"]';\r\n                var container = targetRoot.find(paginatelistcontainer);\r\n                Templates.replaceNodeContents(container, html, js);\r\n                return;\r\n            })\r\n            .always(function() {\r\n                targetRoot = $('#'+options.targetID);\r\n                hideLoadingIcon(targetRoot);\r\n            })\r\n            .fail(Notification.exception);\r\n\r\n    };\r\n\r\n\r\n    //added for the filtering the data\r\n    var filteringData = function(e,submitid) {\r\n        e.preventDefault();\r\n        var formdata =  $(\"form#\"+submitid+\"\").serializeArray();\r\n        values = [];\r\n        filterdatavalue = [];\r\n        $.each(formdata, function (i, field) {\r\n            valuedata = [];\r\n            if(field.name != '_qf__filters_form' && field.name != 'sesskey'){\r\n                if(field.name == 'options' || field.name == 'dataoptions'){\r\n                    values[field.name] = field.value;\r\n                }else{\r\n                    var str = field.name;\r\n                    if(str.indexOf('[]') != -1){\r\n                        field.name = str.substring(0, str.length - 2);\r\n                    }\r\n                    if(field.name in filterdatavalue){\r\n                        filterdatavalue[field.name] = filterdatavalue[field.name]+','+field.value;\r\n                    }else{  \r\n                        filterdatavalue[field.name] = field.value;\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n        var filtervalue = $('#global_filter').val();\r\n        if(filtervalue){\r\n            filterdatavalue[$('#global_filter').attr('name')] = filtervalue;\r\n        }\r\n        optionsparsondata     = JSON.parse(values['options']);\r\n        dataoptionsparsondata = JSON.parse(values['dataoptions']);\r\n        // filterdataparsondata  =  Object.assign({}, filterdatavalue);\r\n        filterdataparsondata = $.extend({}, filterdatavalue);\r\n        $('#global_filter').attr('data-filterdata', JSON.stringify(filterdataparsondata));\r\n        return reload(optionsparsondata, dataoptionsparsondata,filterdataparsondata);\r\n    };\r\n\r\n    //added for the reset the data\r\n    var resetingData = function(e,submitid) {\r\n        var formdata =  $(\"form#\"+submitid+\"\").serializeArray();\r\n        values = [];\r\n        filterdatavalue = [];\r\n        $.each(formdata, function (i, field) {\r\n            valuedata = [];\r\n            if(field.name != '_qf__filters_form' && field.name != 'sesskey'){\r\n                if(field.name == 'options' || field.name == 'dataoptions'){\r\n                    values[field.name] = field.value;\r\n                }\r\n            }\r\n        });\r\n        var filtervalue = $('#global_filter').val();\r\n        if(filtervalue){\r\n            filterdatavalue[$('#global_filter').attr('name')] = filtervalue;\r\n        }\r\n        optionsparsondata     = JSON.parse(values['options']);\r\n        dataoptionsparsondata = JSON.parse(values['dataoptions']);\r\n        // filterdataparsondata  =  Object.assign({}, filterdatavalue);\r\n        filterdataparsondata = $.extend({}, filterdatavalue);\r\n        $('#global_filter').attr('data-filterdata', '[]');\r\n        // $('#global_filter').data('filterdata', '[]');\r\n        reload(optionsparsondata, dataoptionsparsondata, filterdataparsondata);\r\n        var reset =  $(\"form#\"+submitid+\"\")[0].reset();\r\n        // $(\"#fitem_id_acceptchallengedate_\"+submitid+\" .custom-select\").attr(\"disabled\", \"disabled\");\r\n        // $(\"#fitem_id_challengeenddate_\"+submitid+\" .custom-select\").attr(\"disabled\", \"disabled\");\r\n        $(\".tag-info\").html(\"\");\r\n        $(\"div.form-autocomplete-selection span.mb-3\").html(\"No selection\");\r\n        $(\"div.form-autocomplete-selection span.mb-3\").removeClass(\"tag-info\");\r\n        $(\"div.form-autocomplete-selection span.mb-3\").removeClass(\"tag\");\r\n    };\r\n    return {\r\n        reload: reload,\r\n        showLoadingIcon: showLoadingIcon,\r\n        hideLoadingIcon: hideLoadingIcon,\r\n        filteringData:filteringData,\r\n        resetingData:resetingData\r\n    };\r\n});\r\n"],"file":"cardPaginate.min.js"}