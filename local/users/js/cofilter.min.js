(function($){$.fn.dataTableExt.oApi.fnGetColumnData=function(oSettings,iColumn,bUnique,bFiltered,bIgnoreEmpty){if(typeof iColumn=="undefined")return new Array;if(typeof bUnique=="undefined")bUnique=true;if(typeof bFiltered=="undefined")bFiltered=true;if(typeof bIgnoreEmpty=="undefined")bIgnoreEmpty=true;var aiRows;if(bFiltered==true)aiRows=oSettings.aiDisplay;else aiRows=oSettings.aiDisplayMaster;var asResultData=new Array;for(var i=0,c=aiRows.length;i<c;i++){iRow=aiRows[i];var aData=this.fnGetData(iRow);
var sValue=aData[iColumn];if(bIgnoreEmpty==true&&sValue.length==0)continue;else if(bUnique==true&&jQuery.inArray(sValue,asResultData)>-1)continue;else asResultData.push(sValue)}return asResultData};$.fn.coFilter=function(options){var oTable=this;this.bStateSave=true;var defaults={sPlaceHolder:"thead th",columntitles:null,aoColumns:null,filtertype:null,dateformat:"dd/mm/yy"};var properties=$.extend(defaults,options);function fnCreateSelect(j,aData,heading){var i;var r='<div class="selfilterpos"><label>'+
heading+'</label><select class ="selfilter'+j+'"><option value="">Select '+heading+$("th").val();+"</option>",i,iLen=aData.length;for(i=0;i<iLen;i++)r+='<option value="'+aData[i]+'">'+aData[i]+"</option>";return r+"</select></div>"}function fnCreateText(j,aData,heading){var r='<div class="textfilterpos"><label>'+heading+'</label><input type="text" value="" class="textfilter'+j+'"></div>';return r}function fnCreateDate(j,aData,heading){var r='<div class="datefilterpos"><label>'+heading+'</label><input  type="text" value="" class="datefilter'+
j+'"></div>';return r}$(properties.aoColumns).each(function(i){switch(properties.filtertype[properties.aoColumns[i]]){case "select":this.innerHTML=fnCreateSelect(i,oTable.fnGetColumnData(properties.aoColumns[i]),properties.columntitles[properties.aoColumns[i]]);$(".filterarea").append(this.innerHTML);$(".selfilter"+i+"").change(function(){oTable.fnFilter($(this).val(),properties.aoColumns[i])});break;case "date":this.innerHTML=fnCreateDate(i,oTable.fnGetColumnData(properties.aoColumns[i]),properties.columntitles[properties.aoColumns[i]]);
$(".filterarea").append(this.innerHTML);$(".datefilter"+i+"").datepicker({changeMonth:true,changeYear:true,dateFormat:properties.dateformat,showOn:"button",buttonImageOnly:false});$(".datefilter"+i+"").keyup(function(){oTable.fnFilter($(this).val(),properties.aoColumns[i])});$(".datefilter"+i+"").change(function(){oTable.fnFilter($(this).val(),properties.aoColumns[i])});break;case "text":default:this.innerHTML=fnCreateText(i,oTable.fnGetColumnData(properties.aoColumns[i]),properties.columntitles[properties.aoColumns[i]]);
$(".filterarea").append(this.innerHTML);$(".textfilter"+i+"").keyup(function(){oTable.fnFilter($(this).val(),properties.aoColumns[i])});break}})};$(".filterarea").before('<a href="#" id="close-filter" class="filter-toggle">Filters</a>');$(".filterarea").before('<a href="#" id="open-filter" class="filter-toggle">Filters</a>');$("#open-filter").hide();$("a#open-filter").click(function(){$(".filterarea").slideDown(1E3);$("#close-filter").show();$("#open-filter").hide();return false});$("a#close-filter").click(function(){$(".filterarea").slideUp(1E3);
$("#open-filter").show();$("#close-filter").hide();return false})})(jQuery);
