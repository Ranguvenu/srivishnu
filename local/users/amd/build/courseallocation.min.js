function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_users/courseallocation",["local_users/jquery.dataTables","core/str","core/modal_factory","core/modal_events","core/ajax","jquery","jqueryui"],function(a,b,c,d,e,f){return{init:function init(){f(".allocate_button").prop("disabled",!0);f(".allocation_course_type_btn").prop("disabled",!0)},teamsearch:function teamsearch(a){var b=a.searchtype,c=a.searchvalue;if("undefined"==typeof c){return!1}var d=f("input[name='allocateuser']:checked").val();if("users"===b){var e=".departmentusers",g=f("#nominate_userslist").val();f.ajax({type:"POST",url:M.cfg.wwwroot+"/local/users/team_actions/courseallocation_ajax.php?action=searchdata&learningtype="+b+"&search="+c,success:function success(a){f(e).html(a)}})}else{var e=".departmentcourses",h=f("#nominate_userslist").val(),g=f("#nominate_courseslist").val(),i=f("#learning_type").val(),j=f("input[name=\"search_learningtypes\"]").val();if(b!=i){b=i}if(d==void 0||null==d){f(e).html("<div class=\"alert alert-danger\">Select a user to proceed.</div>")}else{f.ajax({type:"POST",url:M.cfg.wwwroot+"/local/users/team_actions/courseallocation_ajax.php?action=searchdata&learningtype="+b+"&search="+c+"&user="+h,success:function success(a){f(e).html(a)}})}}},select_type:function select_type(a){var e=a.user,g=a.learningtype,h=a.pluginname;f("input[name=\"search_learningtypes\"]").val("");f("#learning_type").val(a.learningtype);if(null!=e&&_typeof(e)!=void 0){f("#nominate_userslist").val(e)}var i=f("input[name=\"allocateuser\"]:checked").val();if(e==void 0&&null==i){c.create({title:b.get_string("warning"),type:c.types.DEFAULT,body:b.get_string("team_select_user","local_users")}).done(function(a){a.show();a.getRoot().on(d.hidden,function(){a.destroy()});a.getRoot().on(d.cancel,function(){a.destroy()})});return!1}else{e=i}switch(g){case 1:type=h;break;case 2:type=h;break;case 3:type=h;break;case 4:type=h;break;default:type=h;break;}f(".allocation_course_type").html(type);f.ajax({type:"GET",datatype:"json",url:M.cfg.wwwroot+"/local/users/team_actions/courseallocation_ajax.php?action=departmentmodules&learningtype="+g+"&user="+e,success:function success(a){f(".departmentcourses").html(a)}})},select_list:function select_list(a){var b=a.user,c=a.courses,d=a.learningtype,e=a.element.checked,g=f("#nominate_courseslist").val(),h=f("input[name=\"allocatecourse\"]:checked").val();f("input[name=\"search_learningtypes\"]").val("");var i=!1;switch(d){case 1:if(1<c){if(!0==e){i=!0}}break;case 2:if(c){if(!0==e){i=!0}}break;case 3:if(1<c){if(!0==e){i=!0}}break;case 4:if(1<c){if(!0==e){i=!0}}break;default:i=!1;break;}if(!0==i){f(".allocate_button").prop("disabled",!1);f(".allocation_course_type_btn").prop("disabled",!1)}else{f(".allocate_button").prop("disabled",!0);f(".allocation_course_type_btn").prop("disabled",!0)}switch(d){case 1:break;case 2:break;case 3:break;case 4:break;default:break;}},allocator:function allocator(){var a=f("#nominate_userslist").val(),e=f("#learning_type").val(),g=[];f("input[name=\"search_learningtypes\"]").val("");f("input[name=\"allocatecourse[]\"]:checked").each(function(){var a=f(this).val();g.push(a)});if(!a.length){c.create({title:b.get_string("warning"),type:c.types.DEFAULT,body:b.get_string("team_select_user","local_users")}).done(function(a){a.show();a.getRoot().on(d.hidden,function(){a.destroy()});a.getRoot().on(d.cancel,function(){a.destroy()})});return!1}if(!g.length){c.create({title:b.get_string("warning"),type:c.types.DEFAULT,body:b.get_string("team_select_course_s","local_users")}).done(function(a){a.show();a.getRoot().on(d.hidden,function(){a.destroy()});a.getRoot().on(d.cancel,function(){a.destroy()})});return!1}c.create({title:b.get_string("team_confirm_selected_allocation","local_users"),type:c.types.SAVE_CANCEL,body:b.get_string("allocate_confirm_allocate","local_users")}).done(function(b){b.show();b.getRoot().on(d.hidden,function(){b.destroy()});b.getRoot().on(d.save,function(){f.ajax({type:"post",url:M.cfg.wwwroot+"/local/users/team_actions/courseallocation_ajax.php?action=courseallocate&learningtype="+e+"&user="+a+"&allocatecourse="+g,success:function success(a){f("#allocation_notifications").html("<div class=\"alert alert-info\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">\xD7</button>Selected learning types has been allocated.</div>");b.hide();b.destroy();console.log(a);window.location.href=window.location.href}})});b.getRoot().on(d.cancel,function(){setTimeout(function(){b.destroy()},1e3)})})}}});
//# sourceMappingURL=courseallocation.min.js.map
