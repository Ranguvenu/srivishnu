define ("local_users/team_approvals",["core/str","core/modal_factory","core/modal_events","core/ajax","jquery","jqueryui"],function(a,b,c,d,e){return{init:function init(){},requestsearch:function requestsearch(a){var b=a.learningtype,c=e("input[name=\"approval_learning_type\"]").val();if(c){b=c}var d=a.searchvalue;if("undefined"==typeof d||null==d){return!1}if("elearning"==b){var f="#team_requests_list";e.ajax({type:"POST",url:M.cfg.wwwroot+"/local/users/team_actions/team_approvals_ajax.php?action=searchdata&learningtype="+b+"&search="+d,success:function success(a){e(f).html(a)}})}else{var f="#team_requests_list";e.ajax({type:"POST",url:M.cfg.wwwroot+"/local/users/team_actions/team_approvals_ajax.php?action=searchdata&learningtype="+b+"&search="+d,success:function success(a){e(f).html(a)}})}},select_learningtype:function select_learningtype(a){var b=a.learningtype,c=a.pluginname;e("input[name=\"approval_learning_type\"]").val(b);e("input[name=\"search_requests\"]").val("");e(".team_learningtype_dropdown").html(c);e.ajax({type:"POST",url:M.cfg.wwwroot+"/local/users/team_actions/team_approvals_ajax.php?action=change_learningtype&learningtype="+b,success:function success(a){e("#team_requests_list").html(a)}})},select_request:function select_request(a){var b=a.learningtype,c=a.requestid,d=a.element.checked,f=!1;if(0<c){if(!0==d){f=!0}}if(!0==f){e(".request_approval_btn").prop("disabled",!1)}else{e(".request_approval_btn").prop("disabled",!0)}},approve_request:function approve_request(){var d=e("#approval_learning_type").val(),f=[];e("input[name=\"search_learningtypes\"]").val("");e("input[name=\"team_requests[]\"]:checked").each(function(){var a=e(this).val();f.push(a)});if(!d.length){b.create({title:a.get_string("warning"),type:b.types.DEFAULT,body:a.get_string("select_learningtype","local_users")}).done(function(b){b.setSaveButtonText(a.get_string("approve","local_users"));b.show();b.getRoot().on(c.hidden,function(){b.destroy()});b.getRoot().on(c.cancel,function(){b.destroy()})});return!1}if(!f.length){b.create({title:a.get_string("warning"),type:b.types.DEFAULT,body:a.get_string("select_requests","local_users")}).done(function(b){b.setSaveButtonText(a.get_string("approve","local_users"));b.show();b.getRoot().on(c.hidden,function(){b.destroy()});b.getRoot().on(c.cancel,function(){b.destroy()})});return!1}b.create({title:a.get_string("confirm"),type:b.types.SAVE_CANCEL,body:a.get_string("team_request_confirm","local_users")}).done(function(b){b.setSaveButtonText(a.get_string("approve","local_users"));b.show();b.getRoot().on(c.hidden,function(){b.destroy()});b.getRoot().on(c.save,function(){e.ajax({type:"POST",data:"",url:M.cfg.wwwroot+"/local/users/team_actions/team_approvals_ajax.php?action=requestapproved&learningtype="+d+"&requeststoapprove="+f,success:function success(a){e("#allocation_notifications").html("<div class=\"alert alert-info\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\">\xD7</button>Selected learning types has been allocated.</div>");b.hide();b.destroy();console.log(a);window.location.href=window.location.href}})});b.getRoot().on(c.cancel,function(){setTimeout(function(){b.destroy()},1e3)})})}}});
//# sourceMappingURL=team_approvals.min.js.map
