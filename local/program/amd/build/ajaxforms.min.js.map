{"version":3,"sources":["../src/ajaxforms.js"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","Templates","select2","curriculum","curriculumlastchildpopup","args","ajax","type","url","M","cfg","wwwroot","data","curriculumid","id","action","sesskey","success","returndata","create","title","get_string","body","done","modal","show","setLarge","getRoot","addClass","animate","on","hidden","destroy","bind","click","window","location","href","AjaxForms","contextid","init","prototype","self","callback","header_label","then","types","DEFAULT","getBody","footer","getFooter","find","submitForm","form_status","html","handleFormSubmissionResponse","dataTable","Datatable","setBody","form","submitFormAjax","formdata","jsonformdata","JSON","stringify","loadFragment","component","$footer","$style","hide","use","core_formchangechecker","reset_form_dirty_state","pluginname","reload","method","yearid","resp","handleFormSubmissionFailure","e","preventDefault","formData","serialize","methodname","plugintype","params","promise","call","css","fail","submit","ajaxforms","course_switch","courseid","is","switch_type","checkbox_value","val","error","complete","load","document","costcentervalue","dataType","template","each","index","value","fullname","name","faculties","facultyvalue","template1","departments","department","template2","curriculums","institute_type","programid","rooms","myDescFunction","dots","getElementById","moreText","btnText","style","display","innerHTML"],"mappings":"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","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     core_group/AjaxForms\r\n * @class      AjaxForms\r\n * @package    core_group\r\n * @copyright  2017 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery',\r\n        'core/str',\r\n        'core/modal_factory',\r\n        'core/modal_events',\r\n        'core/fragment',\r\n        'core/ajax',\r\n        'core/yui',\r\n        'core/templates',\r\n        'local_program/select2',\r\n        'local_program/program'],\r\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y, Templates, select2, curriculum) {\r\n\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @param {int} contextid\r\n     *\r\n     * Each call to init gets it's own instance of this class.\r\n     */\r\n    curriculumlastchildpopup = function(args) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url:   M.cfg.wwwroot + '/local/program/ajax.php',\r\n                data: { curriculumid: args.id, action:'curriculumlastchildpopup',\r\n                    sesskey: M.cfg.sesskey\r\n                },\r\n                success: function(returndata) {\r\n                    //Var returned_data is ONLY available inside this fn!\r\n                    ModalFactory.create({\r\n                        title: Str.get_string('curriculum_info', 'local_program'),\r\n                        body: returndata\r\n                      }).done(function(modal) {\r\n                        // Do what you want with your new modal.\r\n                        modal.show();\r\n                         modal.setLarge();\r\n                         modal.getRoot().addClass('openLMStransition');\r\n                            modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n                            modal.getRoot().on(ModalEvents.hidden, function() {\r\n                            // modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                                    // setTimeout(function(){\r\n                                    modal.destroy();\r\n                                // }, 1000);\r\n                            }.bind(this));\r\n                            $(\".close\").click(function(){\r\n                                window.location.href =  window.location.href;\r\n                            });\r\n                         //return modal;\r\n                      });\r\n                }\r\n            });\r\n    };\r\n    var AjaxForms = function(args) {\r\n        this.contextid = args.contextid;\r\n        this.args = args;\r\n        this.init(args);\r\n    };\r\n\r\n    /**\r\n     * @var {Modal} modal\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.modal = null;\r\n\r\n    /**\r\n     * @var {int} contextid\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.contextid = -1;\r\n\r\n    /**\r\n     * Initialise the class.\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.init = function(args) {\r\n        // Fetch the title string.\r\n        var self = this;\r\n            switch (args.callback) {\r\n                case 'program_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'createcurriculum';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatecurriculum';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'session_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addsession';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatesession';\r\n                        break;\r\n                    }\r\n                break;\r\n                /*case 'curriculum_managefaculty_form':\r\n                    header_label = 'addfaculty';\r\n                break;*/\r\n                case 'curriculum_manageclassroom_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addclassroom';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateclassroom';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'course_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addcourses';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatecourses';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'program_manageprogram_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addprogram';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateprogram';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'curriculum_completion_form':\r\n                    header_label = 'curriculum_completion_settings';\r\n                break;\r\n                case 'curriculum_managesemester_form':\r\n                    header_label = 'addsemester';\r\n                break;\r\n                case 'curriculum_manageyear_form':\r\n                  switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addyear';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateyear';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'course_form':\r\n                    header_label = 'addcourse';\r\n                break;\r\n                case 'curriculum_managefaculty_form':\r\n                    header_label = 'addfaculty';\r\n                break;\r\n                case 'curriculum_managestudent_form':\r\n                    header_label = 'addstudent';\r\n                break;\r\n                case 'curriculum_setyearcost_form':\r\n                    header_label = 'setcost';\r\n                break;\r\n                case 'classroom_completion_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'classroom_completion_settings';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateclassroom_completion_settings';\r\n                        break;\r\n                    }\r\n                break;\r\n            }\r\n        return Str.get_string(header_label, 'local_program').then(function(title) {\r\n            // Create the modal.\r\n            return ModalFactory.create({\r\n                type: ModalFactory.types.DEFAULT,\r\n                title: title,\r\n                body: this.getBody(),\r\n                footer: this.getFooter(),\r\n            });\r\n        }.bind(this)).then(function(modal) {\r\n            // Keep a reference to the modal.\r\n            this.modal = modal;\r\n\r\n            // Forms are big, we want a big modal.\r\n            this.modal.setLarge();\r\n\r\n            this.modal.getRoot().addClass('openLMStransition local_curriculum');\r\n\r\n            // We want to reset the form every time it is opened.\r\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\r\n                // this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                // setTimeout(function(){\r\n                    modal.destroy();\r\n                // }, 1000);\r\n            }.bind(this));\r\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\r\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                window.location.href =  window.location.href;\r\n            });\r\n            this.modal.getFooter().find('[data-action=\"skip\"]').on('click', function() {\r\n                self.args.form_status = self.args.form_status + 1;\r\n                 // OL-1042 Add Target Audience to curriculums//\r\n                 if (args.callback == 'program_form') {\r\n                // OL-1042 Add Target Audience to curriculums//\r\n                    // curriculumlastchildpopup(args);\r\n                 }\r\n                var data = self.getBody();\r\n                data.then(function(html, js) {\r\n                    if (html === false) {\r\n                        self.handleFormSubmissionResponse(args);\r\n                        $('#viewcurriculums').dataTable({\r\n                            'language': {\r\n                                'emptyTable': 'No Programs available in table',\r\n                                'paginate': {\r\n                                'previous': '<',\r\n                                'next': '>'\r\n                            },\r\n                        },\r\n                        'bInfo': false,\r\n                        }).destroy();\r\n                        curriculum.Datatable();\r\n                    }\r\n                });\r\n                modal.setBody(data);\r\n            });\r\n\r\n            this.modal.getRoot().on('submit', 'form', function(form) {\r\n                self.submitFormAjax(form, self.args);\r\n            });\r\n            this.modal.show();\r\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n            $(\".close\").click(function(){\r\n                window.location.href =  window.location.href;\r\n            });\r\n            return this.modal;\r\n        }.bind(this));\r\n    };\r\n\r\n    /**\r\n     * @method getBody\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.getBody = function(formdata) {\r\n        if (typeof formdata === \"undefined\") {\r\n            formdata = {};\r\n        }\r\n        // Get the content of the modal.\r\n        this.args.jsonformdata = JSON.stringify(formdata);\r\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\r\n    };\r\n    /**\r\n     * @method getFooter\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.getFooter = function() {\r\n       //Added by Yamini\r\n        if(this.args.callback == \"curriculum_managefaculty_form\" || this.args.callback == \"curriculum_managestudent_form\"){\r\n          $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Assign</button>&nbsp;';\r\n        }\r\n        else{\r\n\r\n        if(this.args.id){\r\n             $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Update</button>&nbsp;';\r\n        }\r\n        else{\r\n        $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Create</button>&nbsp;';\r\n        }\r\n        if (this.form_status == 0) {\r\n            $style = 'style=\"display:none;\"';\r\n            $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"skip\" ' + $style + '>Skip</button>&nbsp;';\r\n        }\r\n       }\r\n        $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">Cancel</button>';\r\n        return $footer;\r\n    };\r\n    /**\r\n     * @method handleFormSubmissionResponse\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.handleFormSubmissionResponse = function(args) {\r\n        this.modal.hide();\r\n        // We could trigger an event instead.\r\n        // Yuk.\r\n        Y.use('moodle-core-formchangechecker', function() {\r\n            M.core_formchangechecker.reset_form_dirty_state();\r\n        });\r\n        if (args.form_status < 0 || args.form_status === false) {\r\n            // window.location.reload(); // Commented by Harish to stop page reloading after creating semester//\r\n            // Changes by Harish to show the same year once after creating semester starts here //\r\n            if(args.pluginname == \"program_program\" || args.pluginname == \"program_addyear\" || args.pluginname == \"program\" || args.pluginname == \"addfaculty\" || args.pluginname == \"session\" || args.pluginname == \"classroom_completion_settings\"){\r\n                window.location.reload();\r\n            }else{\r\n                $.ajax({\r\n                    method: 'POST',\r\n                    url: M.cfg.wwwroot + '/local/program/ajax.php',\r\n                    data: {\r\n                        action: 'curriculumyearsemesters',\r\n                        curriculumid: args.curriculumid,\r\n                        yearid: args.yearid,\r\n                    },\r\n                    success:function(resp){\r\n                        $('.yearstabscontent_container').html(resp);\r\n                    }\r\n                });\r\n            }\r\n            // Changes by Harish to show the same year once after creating semester ends here //\r\n        }\r\n        // curriculumlastchildpopup(args);\r\n    };\r\n\r\n    /**\r\n     * @method handleFormSubmissionFailure\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.handleFormSubmissionFailure = function(data) {\r\n        // Oh noes! Epic fail :(\r\n        // Ah wait - this is normal. We need to re-display the form with errors!\r\n        this.modal.setBody(this.getBody(data));\r\n    };\r\n\r\n    /**\r\n     * Private method\r\n     *\r\n     * @method submitFormAjax\r\n     * @private\r\n     * @param {Event} e Form submission event.\r\n     */\r\n    AjaxForms.prototype.submitFormAjax = function(e, args) {\r\n        // We don't want to do a real form submission.\r\n        e.preventDefault();\r\n        var self = this;\r\n        // Convert all the form elements values to a serialised string.\r\n        var formData = this.modal.getRoot().find('form').serialize();\r\n        var methodname = args.plugintype + '_' + args.pluginname + '_submit_instance';\r\n        // Now we can continue...\r\n        var params = {};\r\n        params.contextid = this.contextid;\r\n        params.jsonformdata = JSON.stringify(formData);\r\n        params.form_status = args.form_status;\r\n\r\n        var promise = Ajax.call([{\r\n            methodname: methodname,\r\n            args: params\r\n        }]);\r\n        promise[0].done(function(resp){\r\n            self.args.form_status = resp.form_status;\r\n            if (resp.form_status >= 0 && resp.form_status !== false) {\r\n                self.args.form_status = resp.form_status;\r\n                self.args.id = resp.id;\r\n                self.handleFormSubmissionFailure();\r\n            } else {\r\n                self.args.id = resp.id;\r\n                self.handleFormSubmissionResponse(self.args);\r\n            }\r\n            if (args.form_status > 0) {\r\n                $('[data-action=\"skip\"]').css('display', 'inline-block');\r\n            }\r\n        }).fail(function(ex){\r\n            self.handleFormSubmissionFailure(formData);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\r\n     *\r\n     * @method submitForm\r\n     * @param {Event} e Form submission event.\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.submitForm = function(e) {\r\n        e.preventDefault();\r\n        this.modal.getRoot().find('form').submit();\r\n    };\r\n\r\n\r\n\r\n    return ajaxforms = /** @alias module:core_group/AjaxForms */ {\r\n        // Public variables and functions.\r\n        /**\r\n         * Attach event listeners to initialise this module.\r\n         *\r\n         * @method init\r\n         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\r\n         * @param {int} contextid The contextid for the course.\r\n         * @return {Promise}\r\n         */\r\n          course_switch: function(args) {\r\n               // $('#switch_course_'+args.courseid).click(function() {\r\n\r\n                // var checked = $('#switch_course_'+args.courseid).is(':checked');\r\n                if($('#switch_course_'+args.courseid).is(':checked')){\r\n                   // var checkbox_value = '';\r\n                   var switch_type = 1;\r\n                   checkbox_value = $('#switch_course_'+args.courseid).val();\r\n\r\n                }else{\r\n                    // var checkbox_value = '';\r\n                    var switch_type = 0;\r\n                    checkbox_value = $('#switch_course_'+args.courseid).val();\r\n                }\r\n                $.ajax({\r\n                type: 'POST',\r\n                url: M.cfg.wwwroot + '/local/program/ajax.php?course='+checkbox_value+'&switch_type='+switch_type,\r\n               // data: { checked : checked },\r\n                data: {action:''},\r\n                success: function(data) {\r\n                    if(switch_type == 1){\r\n                        $('#notifycompletion'+checkbox_value).show();\r\n                    }else{\r\n                        $('#notifycompletion'+checkbox_value).hide();\r\n                    }\r\n                },\r\n                error: function() {\r\n                },\r\n                complete: function() {\r\n\r\n                }\r\n                });\r\n           // });\r\n        },\r\n        init: function(args) {\r\n            return new AjaxForms(args);\r\n        },\r\n        load: function () {\r\n            $(document).on('change', '#id_costcenter', function() {\r\n                var costcentervalue = $(this).find(\"option:selected\").val();\r\n                if (costcentervalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=roomlocation&costcenter=\"+costcentervalue,\r\n                        success: function(data){\r\n                            var template = '<option value = 0>--Select Location--</option>';\r\n\r\n                              $.each(data.data, function( index, value) {\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_location\").html(template);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            $(document).on('change', '#id_location', function() {\r\n                var location = $(this).find(\"option:selected\").val();\r\n                if (location !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=findroom&location=\"+location,\r\n                        success: function(data){\r\n                            var template = '<option value = 0>--Select Room--</option>';\r\n\r\n                              $.each( data.data, function( index, value) {\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.name + '</option>';\r\n                              });\r\n                              // alert(template);\r\n                            $(\"#id_room\").html(template);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            $(document).on('change', '#id_costcenter', function() {\r\n                var costcentervalue = $(this).find(\"option:selected\").val();\r\n                if (costcentervalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=faculties&costcenter=\"+costcentervalue,\r\n                        success: function(data){\r\n                          //  console.log(data);\r\n                            var template = '<option value = 0>--Select Faculty--</option>';\r\n\r\n                              $.each(data.data, function( index, value) {\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_faculty\").html(template);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            $(document).on('change', '#id_costcenter', function() {\r\n                var costcentervalue = $(this).find(\"option:selected\").val();\r\n                if (costcentervalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=costcenterdata&costcenter=\"+costcentervalue,\r\n                        success: function(data){\r\n                            var template = '<option value = 0>Select Faculty</option>';\r\n                              $.each(data.faculties, function( index, value) {\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_facultyid\").html(template);\r\n                            var nulldept = '<option value = 0>Select Department</option>';\r\n                            $(\"#id_departmentid\").html(nulldept);\r\n                            var nullcurriculum = '<option value = 0>Select Curriculum</option>';\r\n                            $(\"#id_curriculumid\").html(nullcurriculum);\r\n                            /*var template1 = '<option value = 0>Select Department</option>';\r\n                              $.each(data.departments, function( index, value) {\r\n                                   template1 +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_departmentid\").html(template1);*/\r\n                          //  var template2 = '<option value = 0>Select Curriculum</option>';\r\n                         /*     $.each(data.curriculums, function( index, value) {\r\n                                   template2 +=  '<option value = ' + value.id + ' >' +value.name + '</option>';\r\n                              });*/\r\n                           // $(\"#id_curriculumid\").html(template2);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            $(document).on('change', '#id_facultyid', function() {\r\n                var facultyvalue = $(this).find(\"option:selected\").val();\r\n                var costcentervalue = $(\"#id_costcenter\").val();\r\n                if (facultyvalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=facultydepts&costcenter=\"+costcentervalue+\"&faculty=\"+facultyvalue,\r\n                        success: function(data){\r\n                            var template1 = '<option value = 0>Select Department</option>';\r\n                              $.each(data.departments, function( index, value) {\r\n                                   template1 +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_departmentid\").html(template1);\r\n                            var template = '<option value = 0>Select Curriculum</option>';\r\n                            $(\"#id_curriculumid\").html(template);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            $(document).on('change', '#id_departmentid', function() {\r\n                var department =  $(this).find(\"option:selected\").val();\r\n                var costcentervalue = $('#id_costcenter').val();\r\n                if (department !== null && department != 0) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=deptcurriculums&costcenter=\"+costcentervalue+\"&department=\"+department,\r\n                        success: function(data){\r\n\r\n                            var template2 = '<option value = 0>Select Curriculum</option>';\r\n                              $.each(data.curriculums, function( index, value) {\r\n                                   template2 +=  '<option value = ' + value.id + ' >' +value.name + '</option>';\r\n                              });\r\n                            $(\"#id_curriculumid\").html(template2);\r\n                        }\r\n\r\n                    });\r\n                }else{\r\n                    var nulltemplate = '<option value = 0>Select Curriculum</option>';\r\n                    $(\"#id_curriculumid\").html(nulltemplate);\r\n                }\r\n            });\r\n\r\n           /*$(document).on('change', '#id_room', function() {\r\n                var roomvalue = $(this).find(\"option:selected\").val();\r\n                if (roomvalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=displaymaxvalue&room=\"+roomvalue,\r\n                        success: function(data){\r\n                             $.each(data.data, function( index, value) {\r\n                                  $(\"#id_maxcapacity\").val(value.capacity);\r\n                              });                           \r\n                        }\r\n                    });\r\n                }\r\n            });*///Commenting room capacity\r\n           $(document).on('click', '#id_institute_type_1', function() {\r\n                var institute_type = $(\"input[name='institute_type']:checked\").val();\r\n                var programid= $('input[name=programid]').val();\r\n                if (institute_type !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=displaylocations&locationvalue=\"+institute_type+\"&programid=\"+programid,\r\n                        success: function(data){\r\n                            var template = '<option value>--Select Location--</option>';\r\n                            var template1 = '<option value>--Select Room--</option>';\r\n                            $.each(data.data, function( index, value) {\r\n\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_instituteid\").html(template);                   \r\n                            $(\"#id_room\").html(template1);                   \r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            $(document).on('click', '#id_institute_type_2', function() {\r\n                var institute_type = $(\"input[name='institute_type']:checked\").val();\r\n                var programid= $('input[name=programid]').val();\r\n                if (institute_type !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=displaylocations&locationvalue=\"+institute_type+\"&programid=\"+programid,\r\n                        success: function(data){\r\n                             var template = '<option value>--Select Location--</option>';\r\n                             var template1 = '<option value>--Select Room--</option>';\r\n                              $.each(data.data, function( index, value) {\r\n\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                            $(\"#id_instituteid\").html(template);                   \r\n                            $(\"#id_room\").html(template1);                   \r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            $(document).on('click', '#id_instituteid', function() {\r\n                var rooms = $(this).find(\"option:selected\").val();\r\n                //alert(rooms);\r\n                if (rooms !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/program/ajax.php?action=findroom&location=\"+rooms,\r\n                        success: function(data){\r\n                             var template = '<option value>--Select Room--</option>';                         \r\n                              $.each(data.data, function( index, value) {\r\n\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.name + '</option>';\r\n                              });\r\n                            $(\"#id_room\").html(template);                   \r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n        },\r\n        myDescFunction: function() {\r\n                var dots = document.getElementById('descriptiondotsBtn');\r\n                var moreText = document.getElementById('resttextDisplay');\r\n                var btnText = document.getElementById('readmoremyBtn');\r\n                if (dots.style.display === \"none\") {\r\n                    dots.style.display = \"inline\";\r\n                    btnText.innerHTML = \"Read more\";\r\n                    moreText.style.display = \"none\";\r\n                  } else {\r\n                    dots.style.display = \"none\";\r\n                    btnText.innerHTML = \"Read less\";\r\n                    moreText.style.display = \"inline\";\r\n                }\r\n            },\r\n    };\r\n});\r\n"],"file":"ajaxforms.min.js"}