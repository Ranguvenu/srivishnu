{"version":3,"sources":["../src/curriculum_views.js"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","advisors","init","curriculumdatatable","args","M","cfg","wwwroot","UsersDatatable","params","action","curriculumid","data","yearid","checkProgramStatus","ajax","type","url","id","ccid","costcenter","sesskey","success","returndata","finalstatus","create","title","types","SAVE_CANCEL","body","get_string","done","modal","setSaveButtonText","getRoot","on","save","show","setTimeout","destroy","document","location","reload","bind","CANCEL","message","hidden","click","hide","FacultysDatatable","semesterid","courseid","console","log"],"mappings":"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","sourcesContent":["define([\r\n    'local_users/responsive.bootstrap',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/ajax',\r\n    'jquery',\r\n    'jqueryui'\r\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\r\n\r\n      var advisors;\r\n    return advisors = {\r\n        init: function(args) {\r\n            \r\n        },\r\n         curriculumdatatable: function(args){\r\n            $('#viewcurriculum').dataTable({\r\n               \"searching\": true,\r\n                \"responsive\": true,\r\n                \"processing\": true,\r\n                \"lengthMenu\": [[10, 25,50,100, -1], [10,25, 50,100, \"All\"]],\r\n                \"language\": {\r\n                    \"emptyTable\": \"No Curriculums available in table\",\r\n                    \"paginate\": {\r\n                        \"previous\": \"<\",\r\n                        \"next\": \">\"\r\n                    },\r\n                    \"sProcessing\": \"<img src= \"+ M.cfg.wwwroot + \"/local/ajax-loader.svg />\"\r\n                },\r\n                 \"aaSorting\": [],\r\n                \r\n                 \"pageLength\": 10,\r\n            \"sAjaxSource\": M.cfg.wwwroot + \"/local/curriculum/manual_curriculum_processing.php?param=\"+args,\r\n      \r\n            });\r\n            \r\n           // console.log(args);\r\n           \r\n        },\r\n        UsersDatatable: function(args) {\r\n            params = [];\r\n            params.action = 'viewcurriculumusers';\r\n            params.curriculumid = $('#viewcurriculumusers').data('curriculumid');\r\n            params.yearid = $('#viewcurriculumusers').data('yearid');\r\n            var oTable = $('#viewcurriculumusers').dataTable({\r\n                'processing': true,\r\n                'serverSide': true,\r\n                \"language\": {\r\n                    \"paginate\": {\r\n                    \"next\": \">\",\r\n                    \"previous\": \"<\"\r\n                    },\r\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\r\n                    \"search\": \"\",\r\n                    \"searchPlaceholder\": \"Search\"\r\n                },\r\n                'ajax': {\r\n                    \"type\": \"POST\",\r\n                    \"url\": M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                    \"data\":params\r\n                },\r\n                \"responsive\": true,\r\n                \"pageLength\": 10,\r\n            });\r\n        },\r\n        checkProgramStatus : function(args) {          \r\n               \r\n               $.ajax({\r\n                    type: \"POST\",\r\n                    url:   M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                    data: { id: args.id, curriculumid: args.ccid, costcenter: args.costcenter, action:'programstatusvalidation',\r\n                        sesskey: M.cfg.sesskey\r\n                          },\r\n                    success: function(returndata) {\r\n                        if(returndata.finalstatus == 'true'){\r\n                            ModalFactory.create({\r\n                             title: 'Confirmation',\r\n                             type: ModalFactory.types.SAVE_CANCEL,\r\n                             body: Str.get_string('publishcurriculum_message', 'local_curriculum'),\r\n                            }).done(function(modal) {\r\n                                this.modal = modal; \r\n                                modal.setSaveButtonText('Publish');                   \r\n                                modal.getRoot().on(ModalEvents.save, function(e) {\r\n                                var returndata = \"Published Successfully....\";\r\n                                ModalFactory.create({                        \r\n                                title: 'Success!',\r\n                                body : returndata,\r\n                                }).done(function(modal) {                          \r\n                                    modal.show();\r\n                                    setTimeout(function(){\r\n                                                modal.destroy();\r\n                                             },20000);\r\n                                    document.location.reload();\r\n                                 }.bind(this));\r\n                                }.bind(this));\r\n                             modal.show();\r\n                            }.bind(this));                       \r\n                        }else{\r\n                            ModalFactory.create({\r\n                                type: ModalFactory.types.CANCEL,\r\n                                title: 'Alert!',\r\n                                body: returndata.message\r\n                              }).done(function(modal){\r\n                                    modal.show();\r\n                                    modal.getRoot().on(ModalEvents.hidden, function() {\r\n                                            modal.destroy();\r\n                                    }.bind(this));\r\n                                    $(\".close\").click(function(){\r\n                                        modal.hide();\r\n                                        modal.destroy();\r\n                                    });\r\n                              });\r\n                        }\r\n                    }\r\n               });\r\n        },\r\n         FacultysDatatable: function(args) {\r\n            params = [];\r\n            params.action = 'viewcoursefaculty';\r\n            params.yearid = $('#viewcoursefaculty').data('yearid');\r\n            params.semesterid = $('#viewcoursefaculty').data('semesterid');\r\n            params.courseid = $('#viewcoursefaculty').data('courseid');\r\n            console.log(params);\r\n            var oTable = $('#viewcoursefaculty').dataTable({\r\n                'processing': true,\r\n                'serverSide': true,\r\n                \"language\": {\r\n                    \"paginate\": {\r\n                    \"next\": \">\",\r\n                    \"previous\": \"<\"\r\n                    },\r\n                    \"processing\": '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>',\r\n                    \"search\": \"\",\r\n                    \"searchPlaceholder\": \"Search\"\r\n                },\r\n                'ajax': {\r\n                    \"type\": \"POST\",\r\n                    \"url\": M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                    \"data\":params\r\n                },\r\n                \"responsive\": true,\r\n                \"pageLength\": 5,\r\n                \"bLengthChange\": false,\r\n                \"bInfo\" : false,\r\n            });\r\n        },\r\n    };\r\n});\r\n"],"file":"curriculum_views.min.js"}