{"version":3,"sources":["../src/ajaxforms.js"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","AjaxForms","args","contextid","init","prototype","modal","console","log","self","callback","id","header_label","get_string","then","title","create","type","types","DEFAULT","body","getBody","footer","getFooter","bind","setLarge","getRoot","addClass","on","hidden","destroy","find","submitForm","window","location","href","form_status","data","setBody","form","submitFormAjax","show","animate","click","formdata","jsonformdata","JSON","stringify","loadFragment","component","$footer","$style","handleFormSubmissionResponse","hide","use","M","core_formchangechecker","reset_form_dirty_state","params","semester","semesterid","pluginname","yearid","ajax","method","url","cfg","wwwroot","action","curriculumid","success","resp","html","hasClass","removeClass","attr","document","reload","handleFormSubmissionFailure","e","preventDefault","formData","serialize","methodname","plugintype","call","done","fail","submit","ajaxforms","course_switch","courseid","is","switch_type","checkbox_value","val","error","complete","load","costcentervalue","dataType","template","each","index","value","fullname","myDescFunction","dots","getElementById","moreText","btnText","style","display","innerHTML","curriculumDatatable","curriculumstatus","sesskey","deleteConfirm","get_strings","key","param","curriculumname","s","confirm","SAVE_CANCEL","setSaveButtonText","save","promise","ex","unassignCourses","programid"],"mappings":"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","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     core_group/AjaxForms\r\n * @class      AjaxForms\r\n * @package    core_group\r\n * @copyright  2017 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery',\r\n        'core/str',\r\n        'core/modal_factory',\r\n        'core/modal_events',\r\n        'core/fragment',\r\n        'core/ajax',\r\n        'core/yui',\r\n        'core/templates',\r\n       // 'local_curriculum/select2',\r\n      //  'local_curriculum/program'],\r\n      ],\r\n        function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y, Templates/*, select2*/, curriculum) {\r\n\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @param {int} contextid\r\n     *\r\n     * Each call to init gets it's own instance of this class.\r\n     */\r\n    /*curriculumlastchildpopup = function(args) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url:   M.cfg.wwwroot + '/local/program/ajax.php',\r\n                data: { curriculumid: args.id, action:'curriculumlastchildpopup',\r\n                    sesskey: M.cfg.sesskey\r\n                },\r\n                success: function(returndata) {\r\n                    //Var returned_data is ONLY available inside this fn!\r\n                    ModalFactory.create({\r\n                        title: Str.get_string('curriculum_info', 'local_program'),\r\n                        body: returndata\r\n                      }).done(function(modal) {\r\n                        // Do what you want with your new modal.\r\n                        modal.show();\r\n                         modal.setLarge();\r\n                         modal.getRoot().addClass('openLMStransition');\r\n                            modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n                            modal.getRoot().on(ModalEvents.hidden, function() {\r\n                            // modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                                    // setTimeout(function(){\r\n                                    modal.destroy();\r\n                                // }, 1000);\r\n                            }.bind(this));\r\n                            $(\".close\").click(function(){\r\n                                window.location.href =  window.location.href;\r\n                            });\r\n                         //return modal;\r\n                      });\r\n                }\r\n            });\r\n    };*/\r\n    var AjaxForms = function(args) {\r\n        this.contextid = args.contextid;\r\n        this.args = args;\r\n        this.init(args);\r\n    };\r\n\r\n    /**\r\n     * @var {Modal} modal\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.modal = null;\r\n\r\n    /**\r\n     * @var {int} contextid\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.contextid = -1;\r\n\r\n    /**\r\n     * Initialise the class.\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.init = function(args) {\r\n        // Fetch the title string.\r\n        console.log(args);\r\n        var self = this;\r\n            switch (args.callback) {\r\n                case 'curriculum_form':\r\n\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'createcurriculum';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatecurriculum';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'session_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addsession';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatesession';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'course_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addcourses';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updatecourses';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'program_manageprogram_form':\r\n                    switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addprogram';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateprogram';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'curriculum_completion_form':\r\n                    header_label = 'curriculum_completion_settings';\r\n                break;\r\n                case 'curriculum_managesemester_form':\r\n                 switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addsemester';\r\n                        break;\r\n                        default:\r\n                            header_label = 'editsemester';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'curriculum_manageyear_form':\r\n                  switch (args.id) {\r\n                        case 0:\r\n                            header_label = 'addyear';\r\n                        break;\r\n                        default:\r\n                            header_label = 'updateyear';\r\n                        break;\r\n                    }\r\n                break;\r\n                case 'course_form':\r\n                    header_label = 'addcourse';\r\n                break;\r\n                case 'curriculum_managefaculty_form':\r\n                    header_label = 'addfaculty';\r\n                break;\r\n                case 'curriculum_managestudent_form':\r\n                    header_label = 'addstudent';\r\n                break;\r\n                case 'curriculum_setyearcost_form':\r\n                    header_label = 'setcost';\r\n                break;\r\n            }\r\n        return Str.get_string(header_label, 'local_curriculum').then(function(title) {\r\n            // Create the modal.\r\n            return ModalFactory.create({\r\n                type: ModalFactory.types.DEFAULT,\r\n                title: title,\r\n                body: this.getBody(),\r\n                footer: this.getFooter(),\r\n            });\r\n        }.bind(this)).then(function(modal) {\r\n            // Keep a reference to the modal.\r\n            this.modal = modal;\r\n\r\n            // Forms are big, we want a big modal.\r\n            this.modal.setLarge();\r\n\r\n            this.modal.getRoot().addClass('openLMStransition local_curriculum');\r\n\r\n            // We want to reset the form every time it is opened.\r\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\r\n                // this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                // setTimeout(function(){\r\n                    modal.destroy();\r\n                // }, 1000);\r\n            }.bind(this));\r\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\r\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                window.location.href =  window.location.href;\r\n            });\r\n            this.modal.getFooter().find('[data-action=\"skip\"]').on('click', function() {\r\n                self.args.form_status = self.args.form_status + 1;\r\n                 // OL-1042 Add Target Audience to curriculums//\r\n                 if (args.callback == 'program_form') {\r\n                // OL-1042 Add Target Audience to curriculums//\r\n                    // curriculumlastchildpopup(args);\r\n                 }\r\n                var data = self.getBody();\r\n              /*  data.then(function(html, js) {\r\n                    if (html === false) {\r\n                        self.handleFormSubmissionResponse(args);\r\n                        $('#viewcurriculums').dataTable({\r\n                            'language': {\r\n                                'paginate': {\r\n                                'previous': '<',\r\n                                'next': '>'\r\n                            },\r\n                        },\r\n                        'bInfo': false,\r\n                        }).destroy();\r\n                        curriculum.Datatable();\r\n                    }\r\n                });*/\r\n                modal.setBody(data);\r\n            });\r\n\r\n            this.modal.getRoot().on('submit', 'form', function(form) {\r\n                self.submitFormAjax(form, self.args);\r\n            });\r\n            this.modal.show();\r\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n            $(\".close\").click(function(){\r\n                window.location.href =  window.location.href;\r\n            });\r\n            return this.modal;\r\n        }.bind(this));\r\n    };\r\n\r\n    /**\r\n     * @method getBody\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.getBody = function(formdata) {\r\n        if (typeof formdata === \"undefined\") {\r\n            formdata = {};\r\n        }\r\n        // Get the content of the modal.\r\n        this.args.jsonformdata = JSON.stringify(formdata);\r\n\r\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\r\n    };\r\n    /**\r\n     * @method getFooter\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.getFooter = function() {\r\n\r\n         if(this.args.callback == \"course_form\"){\r\n          $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Assign</button>&nbsp;';\r\n        }\r\n        else{\r\n        if(this.args.id){\r\n             $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Update</button>&nbsp;';\r\n        }\r\n        else{\r\n        $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Create</button>&nbsp;';\r\n        }\r\n        if (this.args.form_status == 0) {\r\n            $style = 'style=\"display:none;\"';\r\n            $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"skip\" ' + $style + '>Skip</button>&nbsp;';\r\n        }\r\n       }\r\n        $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">Cancel</button>';\r\n        return $footer;\r\n    };\r\n    /**\r\n     * @method handleFormSubmissionResponse\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.handleFormSubmissionResponse = function(args) {\r\n        this.modal.hide();\r\n        // We could trigger an event instead.\r\n        // Yuk.\r\n        Y.use('moodle-core-formchangechecker', function() {\r\n            M.core_formchangechecker.reset_form_dirty_state();\r\n        });\r\n        var params = this.args;\r\n        var semester = params.semesterid;\r\n        if(params.pluginname == \"curriculum_addyear\"){\r\n            var yearid = params.id;\r\n        }else{\r\n            var yearid = params.yearid;\r\n        }\r\n        /*var params = args.split(\"&\");\r\n        var cur = params[1].split(\"=\");\r\n        var year = params[2].split(\"=\");*/\r\n        // if (args.form_status < 0 || args.form_status === false) {\r\n            // window.location.reload(); // Commented by Harish to stop page reloading after creating semester//\r\n            // Changes by Harish to show the same year once after creating semester starts here //\r\n            // if(params.pluginname == \"program_addyear\" || params.pluginname == \"program\" || params.pluginname == \"addfaculty\"){\r\n            //     window.location.reload();\r\n            // }else{\r\n                //-- if-else added by yamini to reload curriculum page too--//\r\n                if(params.yearid){\r\n                $.ajax({\r\n                    method: 'POST',\r\n                    url: M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                    data: {\r\n                        action: 'curriculumyearsemesters',\r\n                        curriculumid: params.curriculumid,\r\n                        yearid: yearid,\r\n                    },\r\n                    success:function(resp){\r\n                        // console.log(resp);\r\n                        // $('.curriculumsemesteryears'+year).trigger();\r\n                        $('.yearstabscontent_container').html(resp);\r\n                        if(semester){\r\n                            // alert('semcollapse_'+semester+'');\r\n                            if($('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'').hasClass('collapse')){\r\n                                if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').hasClass('collapse')){\r\n                                    $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove').addClass('collapsed');\r\n                                    // $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove').setAttribute('aria-expanded', 'false');\r\n                                    $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').removeClass('collapse in').addClass('collapse');\r\n                                }\r\n                                $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcontentlist'+semester+'').attr(\"aria-expanded\",\"true\");\r\n                                $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'').removeClass('collapse').addClass('collapse in');\r\n                            }\r\n                        }else{\r\n                            if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').hasClass('collapse')){\r\n                                $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').removeClass('collapse').addClass('collapse in');\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            else{\r\n                document.location.reload();\r\n            }\r\n            //}\r\n            // Changes by Harish to show the same year once after creating semester ends here //\r\n        // }\r\n        //document.location.reload();        // curriculumlastchildpopup(params);\r\n    };\r\n\r\n    /**\r\n     * @method handleFormSubmissionFailure\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    AjaxForms.prototype.handleFormSubmissionFailure = function(data) {\r\n        // Oh noes! Epic fail :(\r\n        // Ah wait - this is normal. We need to re-display the form with errors!\r\n        this.modal.setBody(this.getBody(data));\r\n    };\r\n\r\n    /**\r\n     * Private method\r\n     *\r\n     * @method submitFormAjax\r\n     * @private\r\n     * @param {Event} e Form submission event.\r\n     */\r\n    AjaxForms.prototype.submitFormAjax = function(e, args) {\r\n        // We don't want to do a real form submission.\r\n        e.preventDefault();\r\n        \r\n        var self = this;\r\n        // Convert all the form elements values to a serialised string.\r\n        var formData = this.modal.getRoot().find('form').serialize();\r\n        var methodname = args.plugintype + '_' + args.pluginname + '_submit_data';\r\n        // Now we can continue...\r\n        var params = {};\r\n        params.contextid = args.contextid;\r\n        params.id = args.id;\r\n        params.yearid = args.yearid;\r\n        params.jsonformdata = JSON.stringify(formData);\r\n        Ajax.call([{\r\n            methodname: methodname,\r\n            args: {contextid: this.contextid, jsonformdata: JSON.stringify(formData)},\r\n            done: this.handleFormSubmissionResponse.bind(this, formData),\r\n            fail: this.handleFormSubmissionFailure.bind(this, formData)\r\n        }]);\r\n     //   params.form_status = args.form_status;\r\n        /*var promise = Ajax.call([{\r\n            methodname: 'local_curriculum_submit_data',\r\n            args: params\r\n        }]);\r\n        promise[0].done(function(resp){\r\n            self.args.form_status = resp.form_status;\r\n            if (resp.form_status >= 0 && resp.form_status !== false) {\r\n                self.args.form_status = resp.form_status;\r\n                self.args.id = resp.id;\r\n                self.handleFormSubmissionFailure();\r\n            } else {\r\n                self.args.id = resp.id;\r\n                self.handleFormSubmissionResponse(self.args);\r\n            }\r\n            if (args.form_status > 0) {\r\n                $('[data-action=\"skip\"]').css('display', 'inline-block');\r\n            }\r\n        }).fail(function(ex){\r\n            self.handleFormSubmissionFailure(formData);\r\n        });*/\r\n    };\r\n\r\n    /**\r\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\r\n     *\r\n     * @method submitForm\r\n     * @param {Event} e Form submission event.\r\n     * @private\r\n     */\r\n    AjaxForms.prototype.submitForm = function(e) {\r\n        e.preventDefault();\r\n        this.modal.getRoot().find('form').submit();\r\n    };\r\n\r\n\r\n\r\n    return ajaxforms = /** @alias module:core_group/AjaxForms */ {\r\n        // Public variables and functions.\r\n        /**\r\n         * Attach event listeners to initialise this module.\r\n         *\r\n         * @method init\r\n         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\r\n         * @param {int} contextid The contextid for the course.\r\n         * @return {Promise}\r\n         */\r\n          course_switch: function(args) {\r\n\r\n               // $('#switch_course_'+args.courseid).click(function() {\r\n                \r\n                // var checked = $('#switch_course_'+args.courseid).is(':checked');\r\n                if($('#switch_course_'+args.courseid).is(':checked')){\r\n                   // var checkbox_value = '';\r\n                   var switch_type = 1;\r\n                   checkbox_value = $('#switch_course_'+args.courseid).val();\r\n\r\n                }else{\r\n                    // var checkbox_value = '';\r\n                    var switch_type = 0;\r\n                    checkbox_value = $('#switch_course_'+args.courseid).val();\r\n                }\r\n                $.ajax({\r\n                type: 'POST',\r\n                url: M.cfg.wwwroot + '/local/curriculum/ajax.php?course='+checkbox_value+'&switch_type='+switch_type,\r\n               // data: { checked : checked },\r\n                data: {action:''},\r\n                success: function(data) {\r\n                  console.log(\"came\");\r\n                    if(switch_type == 1){\r\n                        $('#notifycompletion'+checkbox_value).show();\r\n                    }else{\r\n                        $('#notifycompletion'+checkbox_value).hide();\r\n                    }\r\n                },\r\n                error: function() {\r\n                },\r\n                complete: function() {\r\n\r\n                }\r\n                });\r\n           // }); \r\n        },\r\n        init: function(args) {\r\n            return new AjaxForms(args);\r\n        },\r\n        load: function () {\r\n              $(document).on('change', '#id_costcenter', function() {\r\n                var costcentervalue = $(this).find(\"option:selected\").val();\r\n                if (costcentervalue !== null) {\r\n                    $.ajax({\r\n                        method: \"GET\",\r\n                        dataType: \"json\",\r\n                        url: M.cfg.wwwroot + \"/local/curriculum/ajax.php?action=departmentlist&costcenter=\"+costcentervalue,\r\n                        success: function(data){\r\n                            var template = '<option value = 0>Select Departments</option>';\r\n\r\n                              $.each( data.data, function( index, value) {\r\n                                   template +=  '<option value = ' + value.id + ' >' +value.fullname + '</option>';\r\n                              });\r\n                              // alert(template);\r\n                            $(\"#id_departmentid\").html(template);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        myDescFunction: function() {\r\n                var dots = document.getElementById('descriptiondotsBtn');\r\n                var moreText = document.getElementById('resttextDisplay');\r\n                var btnText = document.getElementById('readmoremyBtn');\r\n                if (dots.style.display === \"none\") {\r\n                    dots.style.display = \"inline\";\r\n                    btnText.innerHTML = \"Read more\";\r\n                    moreText.style.display = \"none\";\r\n                  } else {\r\n                    dots.style.display = \"none\";\r\n                    btnText.innerHTML = \"Read less\";\r\n                    moreText.style.display = \"inline\";\r\n                }\r\n            },\r\n              curriculumDatatable: function(args) {\r\n            params = [];\r\n            params.action = 'viewcurriculums';\r\n            params.curriculumstatus = args.curriculumstatus;\r\n              $.ajax({\r\n                type: \"POST\",\r\n               //  url:   M.cfg.wwwroot + '/local/mooccourses/ajax.php',\r\n               url:   M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                data: {action:'viewcurriculums',\r\n                    sesskey: M.cfg.sesskey\r\n                },\r\n            });\r\n           /* var oTable = $('#viewcurriculums').dataTable({\r\n                'bInfo': false,\r\n                'processing': true,\r\n                'serverSide': true,\r\n                'ajax': {\r\n                    \"type\": \"POST\",\r\n                    \"url\": M.cfg.wwwroot + '/local/program/ajax.php',\r\n                    \"data\": params\r\n                },\r\n                \"bInfo\" : false,\r\n                \"bLengthChange\": false,\r\n                \"language\": {\r\n                    \"paginate\": {\r\n                        \"next\": \">\",\r\n                        \"previous\": \"<\"\r\n                    },\r\n                    'processing': '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>'\r\n                },\r\n                \"pageLength\": 6\r\n            });*/\r\n        },\r\n        deleteConfirm: function(args) {\r\n            return Str.get_strings([{\r\n                key: 'confirmation',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'deleteconfirm',\r\n                component: 'local_curriculum',\r\n                param: args.curriculumname,\r\n            },\r\n            {\r\n                key: 'deleteallconfirm',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'delete',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'deletecourseconfirm',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'cannotdeleteall',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'cannotdeletesession',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'cannotdeletesemester',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'cannotdeletesemesteryear',\r\n                component: 'local_curriculum'\r\n            },\r\n            {\r\n                key: 'confirmunassignfaculty',\r\n                component: 'local_curriculum'\r\n            }\r\n            ]).then(function(s) {\r\n                if (args.action == \"deletecurriculum\") {\r\n                    s[1] = s[1];\r\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                 } else if (args.action == \"deletecurriculumcourse\") {\r\n                    s[1] = s[4];\r\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                 } else if (args.action == \"cannotdeletecurriculum\") {\r\n                    s[1] = s[5];\r\n                    var confirm = ModalFactory.types.DEFAULT;\r\n                 } else if (args.action == \"cannotdeletesession\") {\r\n                    s[1] = s[6];\r\n                    var confirm = ModalFactory.types.DEFAULT;\r\n                 } else if (args.action == \"cannotdeletesemester\") {\r\n                    s[1] = s[7];\r\n                    var confirm = ModalFactory.types.DEFAULT;\r\n                 } else if (args.action == \"cannotdeletesemesteryear\") {\r\n                    s[1] = s[8];\r\n                    var confirm = ModalFactory.types.DEFAULT;\r\n                 } else if (args.action == \"unassignfaculty\") {\r\n                    s[1] = s[9];\r\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                 } else {\r\n                    s[1] = s[2];\r\n                    var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                 }\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: confirm,\r\n                    body: s[1]\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    if(args.action != \"cannotdeletecurriculum\" && args.action != \"cannotdeletesession\" && args.action != \"cannotdeletesemester\" && args.action != \"cannotdeletesemesteryear\"){\r\n                        modal.setSaveButtonText(s[3]);\r\n                    }\r\n                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                        e.preventDefault();\r\n                        args.confirm = true;\r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_curriculum_' + args.action,\r\n                            args: args\r\n                        }]);\r\n                        promise[0].done(function(resp) {\r\n                            if(args.action == \"deletecurriculum\"){\r\n                                window.location.href = M.cfg.wwwroot + '/local/curriculum/index.php';\r\n                            } else {\r\n                                window.location.href = M.cfg.wwwroot + '/local/curriculum/view.php?ccid=' + args.curriculumid +'&type = 1';\r\n                                //window.location.href = window.location.href ;\r\n                            }\r\n                        }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        unassignCourses: function(args){\r\n            console.log(args);\r\n            return Str.get_strings([{\r\n                    key: 'confirmation',\r\n                    component: 'local_curriculum',\r\n                },\r\n                {\r\n                    key: 'unassign_courses_confirm',\r\n                    component: 'local_curriculum',\r\n                    param : args\r\n                },\r\n                {\r\n                    key: 'unassign',\r\n                    component:'local_curriculum',\r\n                },\r\n                {\r\n                    key: 'cannotunassign_courses_confirm',\r\n                    component:'local_curriculum',\r\n                }]).then(function(s) {\r\n                    if (args.action == \"unassign_course\") {\r\n                        s[1] = s[1];\r\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                    } else if (args.action == \"cannotunassign_course\") {\r\n                        s[1] = s[3];\r\n                        var confirm = ModalFactory.types.DEFAULT;\r\n                    } else {\r\n                         s[1] = s[1];\r\n                        var confirm = ModalFactory.types.SAVE_CANCEL;\r\n                    }\r\n                    ModalFactory.create({\r\n                        title: s[0],\r\n                        type: confirm,\r\n                        body: s[1]\r\n                    }).done(function(modal) {\r\n                        this.modal = modal;\r\n                        if (args.action != \"cannotunassign_course\") {\r\n                            modal.setSaveButtonText(s[2]);\r\n                        }\r\n                        modal.getRoot().on(ModalEvents.save, function(e) {\r\n                            e.preventDefault();\r\n                            params = {};\r\n                            params.programid = args.programid;\r\n                            params.curriculumid = args.curriculumid;\r\n                            params.semesterid = args.semesterid;\r\n                            params.yearid = args.yearid;\r\n                            params.courseid = args.courseid;\r\n                            var promise = Ajax.call([{\r\n                                methodname: 'local_curriculum_' + args.action,\r\n                                args: params\r\n                            }]);\r\n                            promise[0].done(function(resp) {\r\n                                modal.hide();\r\n                                var semester = params.semesterid;\r\n                                // window.location.href = window.location.href;\r\n                                // $('.curriculumsemesteryears'+args.yearid).trigger();\r\n                                $.ajax({\r\n                                    method: 'POST',\r\n                                    url: M.cfg.wwwroot + '/local/curriculum/ajax.php',\r\n                                    data: {\r\n                                        action: 'curriculumyearsemesters',\r\n                                        curriculumid: params.curriculumid,\r\n                                        yearid: params.yearid,\r\n                                    },\r\n                                    success:function(resp){\r\n                                        // console.log(resp);\r\n                                        // $('.curriculumsemesteryears'+year).trigger();\r\n                                        $('.yearstabscontent_container').html(resp);\r\n                                        if(semester){\r\n                                            // alert('semcollapse_'+semester+'');\r\n                                            if($('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'').hasClass('collapse')){\r\n                                                if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').hasClass('collapse')){\r\n                                                    $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove').addClass('collapsed');\r\n                                                    // $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .semcontentlist.semabove').setAttribute('aria-expanded', 'false');\r\n                                                    $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').removeClass('collapse in').addClass('collapse');\r\n                                                }\r\n                                                $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcontentlist'+semester+'').attr(\"aria-expanded\",\"true\");\r\n                                                $('.tab-content .local_program-semisters_wrap #lpcourse_content'+semester+' #semcollapse_'+semester+'').removeClass('collapse').addClass('collapse in');\r\n                                            }\r\n                                        }else{\r\n                                            if($('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').hasClass('collapse')){\r\n                                                $('.tab-content .local_program-semisters_wrap .lpcourse_content:first-child .courseslist').removeClass('collapse').addClass('collapse in');\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }).fail(function(ex) {\r\n                                // do something with the exception\r\n                                console.log(ex);\r\n                            });\r\n                        }.bind(this));\r\n                        modal.show();\r\n                    }.bind(this));\r\n                modal.show();\r\n            }.bind(this));\r\n        },\r\n        \r\n    };\r\n});\r\n"],"file":"ajaxforms.min.js"}