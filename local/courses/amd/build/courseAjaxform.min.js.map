{"version":3,"sources":["../src/courseAjaxform.js"],"names":["define","dataTable","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","Y","courseAjaxform","args","contextid","init","prototype","modal","self","courseid","head","get_string","then","title","create","type","types","DEFAULT","body","getBody","footer","getFooter","bind","setLarge","getRoot","addClass","on","hidden","animate","setTimeout","destroy","setBody","find","submitForm","hide","form_status","window","location","reload","form","submitFormAjax","show","formdata","jsonformdata","JSON","stringify","loadFragment","component","callback","$footer","$style","getcontentFooter","handleFormSubmissionResponse","use","M","core_formchangechecker","reset_form_dirty_state","document","handleFormSubmissionFailure","data","e","preventDefault","formData","serialize","methodname","plugintype","pluginname","params","call","done","fail","submit","deleteConfirm","get_strings","key","param","s","SAVE_CANCEL","count","CANCEL","setSaveButtonText","save","confirm","promise","action","href","ex","console","log","userSuspend","id","courseavailability","getCatlist","costcenter","val","html","response","categorytemp","departmentlist","parse","categorylist","each","index","value","name","alert","load"],"mappings":"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","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     local_courses/courseAjaxform\r\n * @class      courseAjaxform\r\n * @package    local_courses\r\n * @copyright  2018 Sreenivas\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['local_courses/jquery.dataTables', 'jquery', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/fragment', 'core/ajax', 'core/yui', 'core/templates'],\r\n        function(dataTable, $, Str, ModalFactory, ModalEvents, Fragment, Ajax, Y, Templates) {\r\n\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @param {int} contextid\r\n     *\r\n     * Each call to init gets it's own instance of this class.\r\n     */\r\n    var courseAjaxform = function(args) {\r\n        this.contextid = args.contextid || 1;\r\n        this.args = args;\r\n        this.init(args);\r\n    };\r\n\r\n    /**\r\n     * @var {Modal} modal\r\n     * @private\r\n     */\r\n    courseAjaxform.prototype.modal = null;\r\n\r\n    /**\r\n     * @var {int} contextid\r\n     * @private\r\n     */\r\n    courseAjaxform.prototype.contextid = -1;\r\n\r\n    /**\r\n     * Initialise the class.\r\n     *\r\n     * @param {String} selector used to find triggers for the new group modal.\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.init = function(args) {\r\n        // Fetch the title string.\r\n        var self = this;\r\n         if (args.courseid) {\r\n            var head =  Str.get_string('editcourse', 'local_courses');\r\n        }else{\r\n           var head =  Str.get_string('createnewcourse', 'local_courses');\r\n        }\r\n        return head.then(function(title) {\r\n            // Create the modal.\r\n            return ModalFactory.create({\r\n                type: ModalFactory.types.DEFAULT,\r\n                title: title,\r\n                body: this.getBody(),\r\n                footer: this.getFooter(),\r\n            });\r\n        }.bind(this)).then(function(modal) {\r\n            // Keep a reference to the modal.\r\n            this.modal = modal;\r\n\r\n            // Forms are big, we want a big modal.\r\n            this.modal.setLarge();\r\n\r\n            this.modal.getRoot().addClass('openLMStransition local_courses');\r\n\r\n            // We want to reset the form every time it is opened.\r\n            this.modal.getRoot().on(ModalEvents.hidden, function() {\r\n                this.modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                setTimeout(function(){\r\n                    modal.destroy();\r\n                }, 1000);\r\n                this.modal.setBody('');\r\n            }.bind(this));\r\n\r\n            // // We want to hide the submit buttons every time it is opened.\r\n            // this.modal.getRoot().on(ModalEvents.shown, function() {\r\n            //     this.modal.getRoot().append('<style>[data-fieldtype=submit] { display: none ! important; }</style>');\r\n            // }.bind(this));\r\n\r\n            // We catch the modal save event, and use it to submit the form inside the modal.\r\n            // Triggering a form submission will give JS validation scripts a chance to check for errors.\r\n            // this.modal.getRoot().on(ModalEvents.save, this.submitForm.bind(this));\r\n            this.modal.getFooter().find('[data-action=\"save\"]').on('click', this.submitForm.bind(this));\r\n            // We also catch the form submit event and use it to submit the form with ajax.\r\n\r\n            this.modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                modal.setBody('');\r\n                modal.hide();\r\n                setTimeout(function(){\r\n                    modal.destroy();\r\n                }, 1000);\r\n                if (args.form_status !== 0 ) {\r\n                    window.location.reload();\r\n                }\r\n            });\r\n            \r\n            this.modal.getRoot().find('[data-action=\"hide\"]').on('click', function() {\r\n                modal.hide();\r\n                setTimeout(function(){\r\n                    modal.destroy();\r\n                }, 1000);\r\n                 //modal.destroy();\r\n                if (args.form_status !== 0 ) {\r\n                    window.location.reload();\r\n                }\r\n                \r\n            });\r\n\r\n            this.modal.getRoot().on('submit', 'form', function(form) {\r\n                self.submitFormAjax(form, self.args);\r\n            });\r\n            this.modal.show();\r\n            this.modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n            return this.modal;\r\n        }.bind(this));\r\n    };\r\n\r\n    /**\r\n     * @method getBody\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.getBody = function(formdata) {\r\n        if (typeof formdata === \"undefined\") {\r\n            formdata = {};\r\n        }\r\n        // Get the content of the modal.\r\n        this.args.jsonformdata = JSON.stringify(formdata);\r\n        return Fragment.loadFragment(this.args.component, this.args.callback, this.contextid, this.args);\r\n    };\r\n    /**\r\n     * @method getFooter\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.getFooter = function() {\r\n           //  console.log(this.args);\r\n       if(this.args.courseid){\r\n             $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Update</button>&nbsp;';\r\n        }\r\n        else{\r\n        $footer = '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">Create</button>&nbsp;';\r\n        }\r\n        if (this.args.form_status == 0) {\r\n            $style = 'style=\"display:none;\"';\r\n            $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"skip\" ' + $style + '>Skip</button>&nbsp;';\r\n        }\r\n        $footer += '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">Cancel</button>';\r\n        return $footer;\r\n    };\r\n     /**\r\n     * @method getFooter\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.getcontentFooter = function() {\r\n        $footer = '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">Cancel</button>';\r\n        return $footer;\r\n    };\r\n    /**\r\n     * @method handleFormSubmissionResponse\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.handleFormSubmissionResponse = function(args) {\r\n        this.modal.hide();\r\n        // We could trigger an event instead.\r\n        // Yuk.\r\n        Y.use('moodle-core-formchangechecker', function() {\r\n            M.core_formchangechecker.reset_form_dirty_state();\r\n        });\r\n\r\n        document.location.reload();\r\n        // This will be the context for our template. So {{name}} in the template will resolve to \"Tweety bird\".\r\n        // Form double submissions removed in course creation page starts here //\r\n        /*var context = { courseid: args.courseid, configpath: M.cfg.wwwroot, enrolid: args.enrolid, contextid:args.contextid};\r\n\r\n        var modalPromise = ModalFactory.create({\r\n            type: ModalFactory.types.DEFAULT,\r\n            body: Templates.render('local_courses/courses', context),\r\n            footer: this.getcontentFooter(),\r\n        });\r\n        $.when(modalPromise).then(function(modal) {\r\n            modal.setTitle('Course Overview');\r\n\r\n            // Forms are big, we want a big modal.\r\n            modal.setLarge();\r\n\r\n            modal.getRoot().addClass('openLMStransition');\r\n            modal.show();\r\n            modal.getRoot().animate({\"right\":\"0%\"}, 500);\r\n            // modal.getRoot().on(ModalEvents.hidden, function() {\r\n            //     modal.hide();\r\n            // });\r\n            modal.getRoot().on(ModalEvents.hidden, function() {\r\n                modal.destroy();\r\n            }.bind(this));\r\n            modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                setTimeout(function(){\r\n                    window.location.reload();\r\n                }, 600);\r\n            });\r\n            modal.getRoot().find('[data-action=\"hide\"]').on('click', function() {\r\n                modal.getRoot().animate({\"right\":\"-85%\"}, 500);\r\n                setTimeout(function(){\r\n                    window.location.reload();\r\n                }, 200);\r\n            });\r\n            return modal;\r\n        }).fail(Notification.exception);\r\n        $('#coursesearch').dataTable().destroy();*/\r\n        // Form double submissions removed in course creation page ends here //\r\n        // Classroom.Datatable();\r\n    };\r\n\r\n    /**\r\n     * @method handleFormSubmissionFailure\r\n     * @private\r\n     * @return {Promise}\r\n     */\r\n    courseAjaxform.prototype.handleFormSubmissionFailure = function(data) {\r\n        // Oh noes! Epic fail :(\r\n        // Ah wait - this is normal. We need to re-display the form with errors!\r\n        this.modal.setBody(this.getBody(data));\r\n    };\r\n\r\n    /**\r\n     * Private method\r\n     *\r\n     * @method submitFormAjax\r\n     * @private\r\n     * @param {Event} e Form submission event.\r\n     */\r\n    courseAjaxform.prototype.submitFormAjax = function(e, args) {\r\n        // We don't want to do a real form submission.\r\n        e.preventDefault();\r\n        var self = this;\r\n        // Convert all the form elements values to a serialised string.\r\n        var formData = this.modal.getRoot().find('form').serialize();\r\n        var methodname = args.plugintype + '_' + args.pluginname + '_submit_create_course_form';\r\n        // Now we can continue...\r\n        var params = {};\r\n        params.contextid = this.contextid;\r\n        params.jsonformdata = JSON.stringify(formData);\r\n        // params.form_status = args.form_status;\r\n        // params.id = args.id;\r\n\r\n        Ajax.call([{\r\n            methodname: methodname,\r\n            args: params,\r\n            done: this.handleFormSubmissionResponse.bind(this, formData),\r\n            fail: this.handleFormSubmissionFailure.bind(this, formData)\r\n        }]);\r\n        // promise[0].done(function(resp){\r\n        //     self.args.courseid = resp.courseid;\r\n        //     self.args.enrolid = resp.enrolid;\r\n        //     if(resp.form_status !== -1 && resp.form_status !== false) {\r\n        //         self.args.form_status = resp.form_status;\r\n        //         self.handleFormSubmissionFailure();\r\n        //     } else {\r\n        //         self.handleFormSubmissionResponse(self.args);\r\n        //     }\r\n        //     // if(args.form_status > 0) {\r\n        //         // $('[data-action=\"skip\"]').css('display', 'inline-block');\r\n        //     // }\r\n        // }).fail(function(){\r\n        //     self.handleFormSubmissionFailure(formData);\r\n        // });\r\n\r\n    };\r\n\r\n    /**\r\n     * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\r\n     *\r\n     * @method submitForm\r\n     * @param {Event} e Form submission event.\r\n     * @private\r\n     */\r\n    courseAjaxform.prototype.submitForm = function(e) {\r\n        e.preventDefault();\r\n        this.modal.getRoot().find('form').submit();\r\n    };\r\n\r\n    return /** @alias module:core_group/courseAjaxform */ {\r\n        // Public variables and functions.\r\n        /**\r\n         * Attach event listeners to initialise this module.\r\n         *\r\n         * @method init\r\n         * @param {string} selector The CSS selector used to find nodes that will trigger this module.\r\n         * @param {int} contextid The contextid for the course.\r\n         * @return {Promise}\r\n         */\r\n        init: function(args) {\r\n            return new courseAjaxform(args);\r\n        },\r\n        deleteConfirm: function(args){\r\n            return Str.get_strings([{\r\n                key: 'confirmation',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'deleteconfirm',\r\n                component: 'local_courses',\r\n                param : args\r\n            },\r\n            {\r\n                key: 'deleteallconfirm',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'delete'\r\n            }]).then(function(s) {\r\n                var type = ModalFactory.types.SAVE_CANCEL;\r\n                var body = s[1];\r\n                if(args['count'] > 0){\r\n                    var coursescount = args.count; \r\n                    type = ModalFactory.types.CANCEL;\r\n                    body = Str.get_string('coursevalidationbody', 'local_courses');\r\n                    // s[0] = Str.get_string('coursevalidationtitle', 'local_courses');\r\n                    s[0] = \"Alert\";\r\n                }\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: type,\r\n                    body: body\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    if(args.count == 0){\r\n                        modal.setSaveButtonText(s[3]);\r\n                        modal.getRoot().on(ModalEvents.save, function(e){\r\n                        e.preventDefault();\r\n                            args.confirm = true;\r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_courses_' + args.action,\r\n                            args: args\r\n                        }]);\r\n                        promise[0].done(function() {\r\n                            window.location.href = window.location.href;\r\n                        }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    }\r\n                    /*modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\r\n                        modal.setBody('');\r\n                        modal.hide();\r\n                    });*/\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n        userSuspend: function(args) {\r\n            console.log(args);\r\n            return Str.get_strings([{\r\n                key: 'confirmation',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'suspendconfirm',\r\n                component: 'local_courses',\r\n                param :args\r\n            },\r\n            {\r\n                key: 'suspendallconfirm',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'confirm'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    body: s[1]\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    modal.setSaveButtonText(s[3]);\r\n                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                        e.preventDefault();\r\n                        args.confirm = true;\r\n                        console.log(args);\r\n                        var params = {};\r\n                        params.id = args.id;\r\n                        params.contextid = args.contextid;\r\n                    \r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_courses_suspend_course',\r\n                            args: params\r\n                        }]);\r\n                        promise[0].done(function(resp) {\r\n                            window.location.href = window.location.href;\r\n                        }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n          courseavailability: function(args) {\r\n            console.log(args);\r\n            return Str.get_strings([{\r\n                key: 'confirmation',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'availiabilityofcourse',\r\n                component: 'local_courses',\r\n                param :args\r\n            },\r\n            {\r\n                key: 'availiabilityofcourseconfirm',\r\n                component: 'local_courses'\r\n            },\r\n            {\r\n                key: 'confirm'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    body: s[1]\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    modal.setSaveButtonText(s[3]);\r\n                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                        e.preventDefault();\r\n                        args.confirm = true;\r\n                        console.log(args);\r\n                        var params = {};\r\n                        params.id = args.id;\r\n                        params.contextid = args.contextid;\r\n                    \r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_courses_availability_course',\r\n                            args: params\r\n                        }]);\r\n                        promise[0].done(function(resp) {\r\n                            window.location.href = window.location.href;\r\n                        }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n        getCatlist: function() {\r\n            costcenter = $(\"#id_open_costcenterid\").val();\r\n            if (costcenter === '') {\r\n                //code\r\n                var template =  '<option value=\\'\\'>--Select Department--</option>';\r\n                $('#id_open_departmentid').html(template);\r\n                var cattemplate =  '<option value=\\'\\'>--Select Department--</option>';\r\n                $('#id_category').html(cattemplate);\r\n            } else {\r\n                var promise = Ajax.call([{\r\n                    methodname: 'local_courses_departmentlist',\r\n                    args: {\r\n                        costcenter: costcenter,\r\n                    },\r\n                }]);\r\n                promise[0].done(function(response) {\r\n                    //var template = '';\r\n                    var categorytemp = '';\r\n                    departmentlist = JSON.parse(response.departmentlist);\r\n                    categorylist = JSON.parse(response.categorylist);\r\n                    $.each(categorylist, function(index, value) {\r\n                        categorytemp += '<option value = ' + value.id + ' >' + value.name + '</option>';\r\n                    });\r\n                    // template += '<option value = \"\" >--Select Department--</option>';\r\n                    //$.each(departmentlist, function(index, value) {\r\n                    //    template += '<option value = ' + value.id + ' >' + value.fullname + '</option>';\r\n                    //});\r\n                    $('#id_category').html(categorytemp);\r\n                    //$('#id_open_departmentid').html(template);\r\n                }).fail(function() {\r\n                    // do something with the exception\r\n                    alert('Error occured while processing request');\r\n                    window.location.reload();\r\n                });\r\n            }\r\n            \r\n        },\r\n        load: function () {}\r\n    };\r\n});\r\n"],"file":"courseAjaxform.min.js"}