{"version":3,"sources":["../src/facultydatatables.js"],"names":["define","dataTable","Str","ModalFactory","ModalEvents","Ajax","$","users","init","facultyDatatable","M","cfg","wwwroot","facultyDelete","args","get_strings","key","component","param","then","s","create","title","type","types","SAVE_CANCEL","body","actionstatusmsg","done","modal","setSaveButtonText","getRoot","on","save","e","preventDefault","confirm","console","log","params","id","promise","call","methodname","window","location","href","fail","ex","bind","show"],"mappings":"AASAA,OAAM,qCAAC,CACH,mCADG,CAEH,UAFG,CAGH,oBAHG,CAIH,mBAJG,CAKH,WALG,CAMH,QANG,CAOH,UAPG,CAAD,CAQH,SAASC,CAAT,CAAoBC,CAApB,CAAyBC,CAAzB,CAAuCC,CAAvC,CAAoDC,CAApD,CAA0DC,CAA1D,CAA6D,CAC5D,GAAIC,CAAAA,CAAJ,CACA,MAAOA,CAAAA,CAAK,CAAG,CACXC,IAAI,CAAE,eAAe,CAEpB,CAHU,CAIXC,gBAAgB,CAAE,2BAAe,CAC7BH,CAAC,CAAC,gBAAD,CAAD,CAAoBL,SAApB,CAA8B,CAC5B,YAD4B,CAE1B,aAF0B,CAG1B,aAH0B,CAI1B,WAAc,CAAC,CAAC,EAAD,CAAK,EAAL,CAAQ,EAAR,CAAW,GAAX,CAAgB,CAAC,CAAjB,CAAD,CAAsB,CAAC,EAAD,CAAI,EAAJ,CAAQ,EAAR,CAAW,GAAX,CAAgB,KAAhB,CAAtB,CAJY,CAK1B,SAAY,CACR,WAAc,iCADN,CAER,SAAY,CACR,SAAY,GADJ,CAER,KAAQ,GAFA,CAFJ,CAMR,YAAe,aAAcS,CAAC,CAACC,GAAF,CAAMC,OAApB,CAA8B,2BANrC,CALc,CAazB,UAAa,EAbY,CAczB,WAAc,EAdW,CAA9B,CAgBH,CArBU,CAsBXC,aAAa,CAAE,uBAASC,CAAT,CAAe,CAE1B,MAAOZ,CAAAA,CAAG,CAACa,WAAJ,CAAgB,CAAC,CACpBC,GAAG,CAAE,SADe,CAAD,CAGvB,CACIA,GAAG,CAAE,gBADT,CAEIC,SAAS,CAAE,iBAFf,CAGIC,KAAK,CAAEJ,CAHX,CAHuB,CAQvB,CACIE,GAAG,CAAE,mBADT,CAEIC,SAAS,CAAE,iBAFf,CARuB,CAYvB,CACID,GAAG,CAAE,SADT,CAZuB,CAAhB,EAcHG,IAdG,CAcE,SAASC,CAAT,CAAY,CACjBjB,CAAY,CAACkB,MAAb,CAAoB,CAChBC,KAAK,CAAEF,CAAC,CAAC,CAAD,CADQ,CAEhBG,IAAI,CAAEpB,CAAY,CAACqB,KAAb,CAAmBC,WAFT,CAGhBC,IAAI,CAAEZ,CAAI,CAACa,eAHK,CAApB,EAIGC,IAJH,CAIQ,SAASC,CAAT,CAAgB,CACpB,KAAKA,KAAL,CAAaA,CAAb,CACAA,CAAK,CAACC,iBAAN,CAAwBV,CAAC,CAAC,CAAD,CAAzB,EACAS,CAAK,CAACE,OAAN,GAAgBC,EAAhB,CAAmB5B,CAAW,CAAC6B,IAA/B,CAAqC,SAASC,CAAT,CAAY,CAC7CA,CAAC,CAACC,cAAF,GACArB,CAAI,CAACsB,OAAL,IACAC,OAAO,CAACC,GAAR,CAAYxB,CAAZ,EAH6C,GAIzCyB,CAAAA,CAAM,CAAG,CACNC,EADM,CACD1B,CAAI,CAAC0B,EADJ,CAJgC,CAQzCC,CAAO,CAAGpC,CAAI,CAACqC,IAAL,CAAU,CAAC,CACrBC,UAAU,CAAE,gCADS,CAErB7B,IAAI,CAAEyB,CAFe,CAAD,CAAV,CAR+B,CAY7CE,CAAO,CAAC,CAAD,CAAP,CAAWb,IAAX,CAAgB,UAAe,CAC3BgB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBF,MAAM,CAACC,QAAP,CAAgBC,IAC1C,CAFD,EAEGC,IAFH,CAEQ,SAASC,CAAT,CAAa,CAEhBX,OAAO,CAACC,GAAR,CAAYU,CAAZ,CACJ,CALD,CAMH,CAlBoC,CAkBnCC,IAlBmC,CAkB9B,IAlB8B,CAArC,EAmBApB,CAAK,CAACqB,IAAN,EACH,CAvBO,CAuBND,IAvBM,CAuBD,IAvBC,CAJR,CA4BH,CA7BQ,CA6BPA,IA7BO,CA6BF,IA7BE,CAdF,CA4CV,CApEU,CAsElB,CAhFK,CAAN","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     core_group/AjaxForms\r\n * @class      AjaxForms\r\n * @package    core_group\r\n * @copyright  2017 Damyon Wiese <damyon@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine([\r\n    'local_faculties/jquery.dataTables',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/ajax',\r\n    'jquery',\r\n    'jqueryui'\r\n], function(dataTable, Str, ModalFactory, ModalEvents, Ajax, $) {\r\n    var users;\r\n    return users = {\r\n        init: function(args) {\r\n            \r\n        },\r\n        facultyDatatable: function(args) {\r\n            $('#faculty-index').dataTable({\r\n              \"searching\": true,\r\n                \"responsive\": true,\r\n                \"processing\": true,\r\n                \"lengthMenu\": [[10, 25,50,100, -1], [10,25, 50,100, \"All\"]],\r\n                \"language\": {\r\n                    \"emptyTable\": \"No Faculties available in table\",\r\n                    \"paginate\": {\r\n                        \"previous\": \"<\",\r\n                        \"next\": \">\"\r\n                    },\r\n                    \"sProcessing\": \"<img src= \"+ M.cfg.wwwroot + \"/local/ajax-loader.svg />\"\r\n                },\r\n                 \"aaSorting\": [],\r\n                 \"pageLength\": 10,          \r\n            });\r\n        },\r\n        facultyDelete: function(args) {\r\n            //console.log(args);\r\n            return Str.get_strings([{\r\n                key: 'confirm'\r\n            },\r\n            {\r\n                key: 'suspendconfirm',\r\n                component: 'local_faculties',\r\n                param :args\r\n            },\r\n            {\r\n                key: 'suspendallconfirm',\r\n                component: 'local_faculties'\r\n            },\r\n            {\r\n                key: 'confirm'\r\n            }]).then(function(s) {\r\n                ModalFactory.create({\r\n                    title: s[0],\r\n                    type: ModalFactory.types.SAVE_CANCEL, //added revathi\r\n                    body: args.actionstatusmsg\r\n                }).done(function(modal) {\r\n                    this.modal = modal;\r\n                    modal.setSaveButtonText(s[3]);\r\n                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                        e.preventDefault();\r\n                        args.confirm = true;\r\n                        console.log(args);\r\n                        var params = {};\r\n                        params.id = args.id;\r\n                        // params.contextid = args.contextid;\r\n                    \r\n                        var promise = Ajax.call([{\r\n                            methodname: 'local_faculties_delete_faculty',\r\n                            args: params\r\n                        }]);\r\n                        promise[0].done(function(resp) {\r\n                            window.location.href = window.location.href;\r\n                        }).fail(function(ex) {\r\n                            // do something with the exception\r\n                             console.log(ex);\r\n                        });\r\n                    }.bind(this));\r\n                    modal.show();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n    };\r\n});"],"file":"facultydatatables.min.js"}