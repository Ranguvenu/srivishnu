define(["exports"],function(a){"use strict";var b={init:function(a,b){var c=this;c.elem=b,c.$elem=$(b),c.options=$.extend({},$.fn.toolbar.options,a),c.metadata=c.$elem.data(),c.overrideOptions(),c.toolbar=$('<div class="tool-container" />').addClass("tool-"+c.options.position).addClass("toolbar-"+c.options.style).append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide(),c.toolbar_arrow=c.toolbar.find(".arrow"),c.initializeToolbar()},overrideOptions:function(){var a=this;$.each(a.options,function(b){"undefined"!=typeof a.$elem.data("toolbar-"+b)&&(a.options[b]=a.$elem.data("toolbar-"+b))})},initializeToolbar:function(){var a=this;a.populateContent(),a.setTrigger(),a.toolbarWidth=a.toolbar.width()},setTrigger:function(){function a(){b.$elem.hasClass("pressed")?c=setTimeout(function(){b.hide()},150):clearTimeout(c)}function a(){b.$elem.hasClass("pressed")?c=setTimeout(function(){b.hide()},150):clearTimeout(c)}var b=this;if("click"!=b.options.event){var c;b.$elem.on({mouseenter:function(a){b.$elem.hasClass("pressed")?clearTimeout(c):b.show()}}),b.$elem.parent().on({mouseleave:function(b){a()}}),$(".tool-container").on({mouseenter:function(a){clearTimeout(c)},mouseleave:function(b){a()}})}if("click"==b.options.event&&(b.$elem.on("click",function(a){a.preventDefault(),b.$elem.hasClass("pressed")?b.hide():b.show()}),b.options.hideOnClick&&$("html").on("click.toolbar",function(a){a.target!=b.elem&&0===b.$elem.has(a.target).length&&0===b.toolbar.has(a.target).length&&b.toolbar.is(":visible")&&b.hide()})),b.options.hover){var c;b.$elem.on({mouseenter:function(a){b.$elem.hasClass("pressed")?clearTimeout(c):b.show()}}),b.$elem.parent().on({mouseleave:function(b){a()}}),$(".tool-container").on({mouseenter:function(a){clearTimeout(c)},mouseleave:function(b){a()}})}$(window).resize(function(a){a.stopPropagation(),b.toolbar.is(":visible")&&(b.toolbarCss=b.getCoordinates(b.options.position,20),b.collisionDetection(),b.toolbar.css(b.toolbarCss),b.toolbar_arrow.css(b.arrowCss))})},populateContent:function(){var a=this,b=a.toolbar.find(".tool-items"),c=$(a.options.content).clone(!0).find("a").addClass("tool-item");b.html(c),b.find(".tool-item").on("click",function(b){b.preventDefault(),a.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var a=this;a.arrowCss={},a.toolbarCss=a.getCoordinates(a.options.position,a.options.adjustment),a.toolbarCss.position="absolute",a.toolbarCss.zIndex=a.options.zIndex,a.collisionDetection(),a.toolbar.css(a.toolbarCss),a.toolbar_arrow.css(a.arrowCss)},getCoordinates:function(a,b){var c=this;switch(c.coordinates=c.$elem.offset(),c.options.adjustment&&c.options.adjustment[c.options.position]&&(b=c.options.adjustment[c.options.position]+b),c.options.position){case"top":return{left:c.coordinates.left-c.toolbar.width()/2+c.$elem.outerWidth()/2,top:c.coordinates.top-c.$elem.outerHeight()-b,right:"auto"};case"left":return{left:c.coordinates.left-c.toolbar.width()/2-c.$elem.outerWidth()/2-b,top:c.coordinates.top-c.toolbar.height()/2+c.$elem.outerHeight()/2,right:"auto"};case"right":return{left:c.coordinates.left+c.toolbar.width()/2+c.$elem.outerWidth()/2+b,top:c.coordinates.top-c.toolbar.height()/2+c.$elem.outerHeight()/2,right:"auto"};case"bottom":return{left:c.coordinates.left-c.toolbar.width()/2+c.$elem.outerWidth()/2,top:c.coordinates.top+c.$elem.outerHeight()+b,right:"auto"}}},collisionDetection:function(){var a=this,b=20;"top"!=a.options.position&&"bottom"!=a.options.position||(a.arrowCss={left:"50%",right:"50%"},a.toolbarCss.left<b?(a.toolbarCss.left=b,a.arrowCss.left=a.$elem.offset().left+a.$elem.width()/2-b):$(window).width()-(a.toolbarCss.left+a.toolbarWidth)<b&&(a.toolbarCss.right=b,a.toolbarCss.left="auto",a.arrowCss.left="auto",a.arrowCss.right=$(window).width()-a.$elem.offset().left-a.$elem.width()/2-b-5))},show:function(){var a=this;a.$elem.addClass("pressed"),a.calculatePosition(),a.toolbar.show().css({opacity:1}).addClass("animate-"+a.options.animation),a.$elem.trigger("toolbarShown")},hide:function(){var a=this,b={opacity:0};switch(a.$elem.removeClass("pressed"),a.options.position){case"top":b.top="+=20";break;case"left":b.left="+=20";break;case"right":b.left="-=20";break;case"bottom":b.top="-=20"}a.toolbar.animate(b,200,function(){a.toolbar.hide()}),a.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};$.fn.toolbar=function(a){if($.isPlainObject(a))return this.each(function(){var c=Object.create(b);c.init(a,this),$(this).data("toolbarObj",c)});if("string"==typeof a&&0!==a.indexOf("_")){var c=$(this).data("toolbarObj"),d=c[a];return d.apply(c,$.makeArray(arguments).slice(1))}},$.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:!1,zIndex:120,hover:!1,style:"default",animation:"standard",adjustment:10}});