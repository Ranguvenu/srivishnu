{"version":3,"sources":["../src/reportwidget.js"],"names":["define","$","Ajax","report","smartfilter","reportwidget","DashboardWidgets","args","self","container","filterdata","FilterData","reportid","show","each","data","blockinstance","val","reportinstance","reporttype","params","extend","CreateDashboardwidget","instanceid","DashboardTiles","ls_fstartdate","ls_fenddate","courseid","CreateDashboardTile","blockinstanceid","html","filters","urlParam","name","results","RegExp","exec","window","location","href","dashboardurl","filter_courses","filter_college","filter_departments","promise","call","methodname","JSON","stringify","loading","done","parse","tabledata","plot","error","messages","length","require","generate_plotgraph","key","value","head","categorydata","k","v","isNaN","append","styletilescolour","css","console","log","reportdashboard","columnDefs","removeClass","addClass","selectreport","attr","singleplot","action","link","basicparams","basicparamsdata","indexOf","BasicparamsData","prepend","M","util","image_url","chartdata","parseJSON","emptydata","tdata","document","ajaxStop","remove","reportname","ReportDatatable","fail"],"mappings":"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","sourcesContent":["define(['jquery',\n        'core/ajax',\n        'block_learnerscript/report',\n        'block_learnerscript/smartfilter'\n    ], function($, Ajax, report, smartfilter) {\n    return reportwidget = {\n        /**\n         * Creates dashboard widgets for configured widgets of dashboard depends on type\n         * @param object args reportcontainer\n         * @return Creates and render widgets with given congurations and locations\n         */\n        DashboardWidgets: function(args) {\n            var self = this;\n            var args = args || {\n                container: '.report_dashboard_container'\n            };\n            var filterdata = smartfilter.FilterData(args.reportid);\n            $('.loader').show();\n            $(args.container).each(function() {\n                var reporttype;\n                var reportid = $(this).data('reportid');\n                var blockinstance = $(this).data('blockinstance');\n                if ($(this).val() != '') {\n                    var blockinstance = $(\"#reportcontainer\" + reportinstance).data('blockinstance');\n                    args.reporttype = $(\"#reporttype_\" + blockinstance + \"  :selected\").val();\n                    var params = {\n                        reportid: reportid,\n                        reporttype: args.reporttype\n                    };\n                    $.extend(params, filterdata);\n                    self.CreateDashboardwidget(params);\n                    return false;\n                }\n                args.reporttype = $(\"#reporttype_\" + blockinstance + \"  :selected\").val();\n\n                if (typeof(args.reporttype) == 'undefined') {\n                    args.reporttype = $(this).data('reporttype');\n                }\n\n                self.CreateDashboardwidget({\n                    reportid: reportid,\n                    reporttype: args.reporttype,\n                    instanceid: blockinstance\n                });\n            });\n        },\n        DashboardTiles: function() {\n            var self = this;\n            ls_fstartdate = $('#ls_fstartdate').val();\n            ls_fenddate = $('#ls_fenddate').val();\n            var courseid = $('#ls_courseid').val();\n            $(\".tiles_information\").each(function() {\n                self.CreateDashboardTile({\n                    blockinstanceid: $(this).data('instanceid'),\n                    reportid: $(this).data('reportid'),\n                    reporttype: $(this).data('reporttype'),\n                    ls_fstartdate: ls_fstartdate,\n                    ls_fenddate: ls_fenddate,\n                    courseid: courseid\n                })\n            });\n        },\n        CreateDashboardTile: function(args) {\n            var self = this;\n            $(\"#inst\" + args.blockinstanceid + \" .tiles_information table tr\").html(\"\");\n            var reportinstance = args.blockinstanceid;\n            var filters = {};\n            filters['ls_fstartdate'] = $('#ls_fstartdate'+args.blockinstanceid).val();\n            filters['ls_fenddate'] = $('#ls_fenddate'+args.blockinstanceid).val();\n\n            $.urlParam = function(name){\n                var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n                if (results === null || results == ' ' ){\n                    return null;\n                } else {\n                    return results[1] || 0;\n                }\n            }\n            var dashboardurl = $.urlParam('dashboardurl');\n            if (typeof filters['filter_courses'] == 'undefined') {\n                var filter_courses = $('.report_courses').val();\n                if (dashboardurl == 'Course') {\n                    args.courseid = filter_courses;\n                }\n                if (filter_courses != 1) {\n                    filters['filter_courses'] = filter_courses;\n                }\n            }\n\n            if (typeof filters['filter_college'] == 'undefined') {\n                var filter_college = $('#ls_collegeid').val();\n                if (filter_college != 0) {\n                    filters['filter_college'] = filter_college;\n                }\n            }\n            if (typeof filters['filter_department'] == 'undefined') {\n                var filter_departments = $('#ls_departmentid').val();\n                if (filter_departments != 0) {\n                    filters['filter_department'] = filter_departments;\n                }\n            }\n            \n            var promise = Ajax.call([{\n                methodname: 'block_learnerscript_generate_plotgraph',\n                args: {\n                    instanceid: args.blockinstanceid,\n                    reportid: args.reportid,\n                    courseid: args.courseid,\n                    filters: JSON.stringify(filters),\n                    // filter_courseid: args.courseid,\n                    reporttype: args.reporttype\n                },\n                loading: '#reportloading_' + args.blockinstanceid\n            }]);\n            promise[0].done(function(data) {\n                data = JSON.parse(data);\n                var heads = [];\n                var tabledata = [];\n                if (args.reporttype != 'table') {\n                    // if (typeof args.ls_fstartdate == 'undefined') {\n                        $.extend(data.plot, args);\n                        data.plot.container = \"#plotreportcontainer\" + reportinstance;\n                        if (data.plot.error === true) {\n                            $('#plotreportcontainer' + reportinstance).html('<p class=\"alert alert-warning\">' + data.plot.messages + '</p>');\n                        } else {\n                            if (data.plot.data.length == 0) {\n                                $(data.plot.container).html(\"<div class='alert alert-info'>Data Not Available.</div>\");\n                            } else {\n                                data.plot.reportinstance = reportinstance;\n                                require(['block_learnerscript/report'], function(report) {\n                                    report.generate_plotgraph(data.plot);\n                                });\n                            }\n                        }\n                    // }\n                } else {\n                    if (typeof data.plot != 'undefined') {\n                        if (data.plot.data.length > 0) {\n                            $(data.plot.data).each(function(key, value) {\n                                heads = [];\n                                tabledata = [];\n                                heads = value.head;\n                                tabledata = value.data;\n                            });\n                            $(data.plot.categorydata).each(function(k, v) {\n                                if (data.plot.categorydata.length == 1) {\n                                    if (!isNaN(tabledata[0][k])) {\n                                        $(\"#inst\" + args.blockinstanceid + \" .tiles_information table tr\").append('<td><h1 ' + args.styletilescolour + '> ' + tabledata[0][k] + ' </h1></td>');\n                                    } else {\n                                        $(\"#inst\" + args.blockinstanceid + \" .tiles_information table tr\").append('<td><h6 ' + args.styletilescolour + '> ' + tabledata[0][k] + ' </h6></td>');\n                                    }\n                                } else {\n                                    $(\"#inst\" + args.blockinstanceid + \" .tiles_information table tr\").append('<td>' + v + ' : <b> ' + tabledata[k] + ' </b></td>');\n                                }\n                            });\n                        } else {\n                                $(\"#inst\" + args.blockinstanceid + \" .tiles_information table tr\").html(\"<div class='alert alert-info'> No Data Available.</div>\");\n                                $(\"#inst\" + args.blockinstanceid + \" .dashboard_tiles\").css('color', '#4B4B4B');\n                                // $(\"#inst\" + args.blockinstanceid + \" .tiles_information\").html(\"<div class='alert alert-info'> No Data Available.</div>\");\n                        }\n                        $(\"#reportloading_\" + args.blockinstanceid).css('display', 'none');\n                    }\n                }\n            });\n        },\n        /**\n         * Creates single dashboard widget for requested report and type\n         * @param object args reportid and reporttype\n         * @return Creates report widget depends on type table,pie chart etc...\n         */\n        CreateDashboardwidget: function(args) {\n            var self = this;\n            console.log(args);\n            if(args.reportdashboard == false){\n                args.instanceid = '';\n            }\n            var reportinstance = args.instanceid || args.reportid;\n            args.filters = smartfilter.FilterData(reportinstance);\n            args.columnDefs = '';\n            args.filters['ls_fstartdate'] = $('#ls_fstartdate'+args.instanceid).val();\n            args.filters['ls_fenddate'] = $('#ls_fenddate'+args.instanceid).val();\n\n            if (typeof args.filters['filter_college'] == 'undefined') {\n                var filter_college = $('#ls_collegeid').val();\n                if (filter_college != 0) {\n                    args.filters['filter_college'] = filter_college;\n                }\n            }\n            if (typeof args.filters['filter_department'] == 'undefined') {\n                var filter_departments = $('#ls_departmentid').val();\n                if (filter_departments != 0) {\n                    args.filters['filter_department'] = filter_departments;\n                }\n            }\n\n            if (typeof args.filters['filter_courses'] == 'undefined') {\n                var filter_courses = $('.report_courses').val();\n                if (filter_courses != 1) {\n                    args.filters['filter_courses'] = filter_courses;\n                }\n            }\n            if (args.reporttype == 'table') {\n            } else {\n                $('.plotgraphcontainer').removeClass('hide').addClass('show');\n            }\n            if (args.selectreport) {\n                $(\"#reportcontainer\" + reportinstance).attr('data-reporttype', args.singleplot);\n                $(\"#plotreportcontainer\" + reportinstance).attr('data-reporttype', args.singleplot);\n                delete args.selectreport;\n            }\n\n            args.filters = JSON.stringify(args.filters);\n\n            args.action = 'generate_plotgraph';\n            $('.download_menu' + reportinstance + ' li a').each(function(index) {\n                var link = $(this).attr('href');\n                if (typeof args.basicparams != 'undefined') {\n                    var basicparamsdata = JSON.parse(args.basicparams);\n                    $.each(basicparamsdata, function(key, value) {\n                        if (key.indexOf('filter_') == 0) {\n                            link += '&' + key + '=' + value;\n                        }\n                    });\n                }\n                if (typeof(args.filters) != 'undefined') {\n                    var filters = JSON.parse(args.filters);\n                    $.each(filters, function(key, value) {\n                        if (key.indexOf('filter_') == 0) {\n                            link += '&' + key + '=' + value;\n                        }\n                        if(key.indexOf('ls_') == 0) {\n                            link += '&' + key + '=' + value;\n                        }\n                    });\n                }\n                $(this).attr('href', link);\n            });\n            args.basicparams = args.basicparams || JSON.stringify(smartfilter.BasicparamsData(reportinstance));\n            if (typeof args.reportdashboard != 'undefined' && typeof args.reporttype != 'undefined') {\n                $(\"#reportcontainer\" + reportinstance).html(\"\");\n                $(\"#plotreportcontainer\" + reportinstance).html(\"\");\n            } else {\n                if (typeof args.reportdashboard != 'undefined' && args.reporttype == 'table') {\n                    $(\"#reportcontainer\" + reportinstance).html(\"\");\n                } else {\n                    $(\"#plotreportcontainer\" + reportinstance).html(\"\");\n                }\n            }\n            var promise = Ajax.call([{\n                methodname: 'block_learnerscript_generate_plotgraph',\n                args: args,\n                loading: '#reportloading_' + args.reportid\n            }]);\n            if ($(\"#reportloadingimage\").length <= 0) {\n                if (args.reporttype == 'table') {\n                    $(\"#reportcontainer\" + args.reportid).prepend('<img src=\"' + M.util.image_url('loading', 'block_learnerscript') + '\" id=\"reportloadingimage\" />');\n                } else {\n                    $(\"#plotreportcontainer\" + args.reportid).prepend('<img src=\"' + M.util.image_url('loading', 'block_learnerscript') + '\" id=\"reportloadingimage\" />');\n                }\n            }\n            promise[0].done(function(chartdata) {\n                chartdata = $.parseJSON(chartdata);\n                var reporttype = chartdata.reporttype || args.reporttype;\n                if (reporttype == 'table') {\n                    if (typeof(chartdata.data) == 'undefined' && chartdata.emptydata) {\n                        if (!$('#reporttable_' + args.reportid).length) {\n                            $(\"#reportcontainer\" + reportinstance).html(chartdata.tdata);\n                        }\n                        $(document).ajaxStop(function() {\n                            $(\"#reportloadingimage\").remove();\n                        });\n                        args.reportname = chartdata.reportname;\n                        require(['block_learnerscript/report'], function(report) {\n                            report.ReportDatatable(args);\n                        });\n                    } else {\n                        if (!$('#reporttable_' + args.reportid).length) {\n                            $(\"#reportcontainer\" + reportinstance).html(chartdata.tdata);\n                        }\n                        $(document).ajaxStop(function() {\n                            $(\"#reportloadingimage\").remove();\n                        });\n                        args.columnDefs = chartdata.columnDefs;\n                        args.data = chartdata.data;\n                        args.reportname = chartdata.reportname;\n                        require(['block_learnerscript/report'], function(report) {\n                            report.ReportDatatable(args);\n                        });\n                    }\n                } else {\n                    $.extend(chartdata.plot, args);\n                    chartdata.plot.container = \"#plotreportcontainer\" + reportinstance;\n                    $(document).ajaxStop(function() {\n                        $(\"#reportloadingimage\").remove();\n                    });\n                    if (chartdata.plot.error === true) {\n                        $('#plotreportcontainer' + reportinstance).html('<p class=\"alert alert-warning\">' + chartdata.plot.messages + '</p>');\n                    } else {\n                        if (chartdata.plot.data && chartdata.plot.data.length > 0) {\n                            chartdata.plot.reportinstance = reportinstance;\n                            $(\".drilldown\" + reportinstance + \" .ui-dialog-title\").html(chartdata.reportname);\n                            args.reportname = chartdata.reportname;                            \n                            require(['block_learnerscript/report'], function(report) {\n                                report.generate_plotgraph(chartdata.plot);\n                            });\n                        } else {\n                            $(chartdata.plot.container).html('<p class=\"alert alert-warning\">No data available</p>');\n                        }\n                    }\n                }\n            }).fail(function(ex) {\n                // do something with the exception\n            });\n        }\n    }\n});\n"],"file":"reportwidget.min.js"}